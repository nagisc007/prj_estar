# -*- coding: utf-8 -*-
"""Story: chapter 04: The another me
"""
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')

from storybuilder.builder import world as wd
from src.anotherme import config as cnf
THM = cnf.THEMES


# scenes
def sc_afraid(w: wd.World):
    kyoko, shota, child, stu, univ = w.kyoko, w.shota, w.child_kyoko, w.student_kyoko, w.univ_kyoko
    h = kyoko
    return w.scene("怯え",
            kyoko.be(w.stage.living, w.day.volunteer),
            kyoko.ask("$univ？"),
            kyoko.look("$meに手を差し伸べている赤い眼鏡の女性から",
                "逃げ出そうという体勢のままで彼女を見ていた"),
            univ.talk("他の$fn_kyokoたちと何も変わらないのに",
                "何をそんなに怯えているの？"),
            kyoko.look("彼女は$meの前で屈むと",
                "目線の高さを同じにしてチューリップのように重ねた手の上に顎を置く。",
                "革のスカートが膝上まで上がり", "すっきりとした脛が露になる"),
            univ.talk("$meはもう一人のあなた。",
                "だから何も怖がる必要はないの。",
                "それともあなたは自分自身が怖いの？", "嫌いなの？", "目を背けたい存在なの？"),
            kyoko.feel("喉がカラカラになり",
                "全身の毛穴が開く。",
                "嫌な汗が噴き出して",
                "心臓がどんどん早くなる"),
            kyoko.ask("……なんで"),
            kyoko.behav("暫く見つめ合った後で何とか絞り出せたのが", "たったそれだけの言葉だった"),
            univ.talk("$i_IFがどうやって生まれるのか", "という質問？",
                "それなら$ln_miura先生にでも訊いた方が早いんじゃない？",
                "だって$meはあなただもの。",
                "あなたの知らないことは$meにも分からない"),
            kyoko.talk("ちょっとだけ待って"),
            univ.talk("いくらでも待つわよ。", "時間なんてあってないようなものだし"),
            kyoko.behav("$meは体を起こして一旦キッチンに引き上げる"),
            h.deal("冷蔵庫からペットボトルに入っている今朝作った麦茶を取り出し",
                "コップに注ぎ入れてそれを一気に飲み干す。",
                "胸元の気持ち悪い温度が僅かに下がった気になるが",
                "それでもまだ鼓動は落ち着かないのでもう一杯", "麦茶を飲んだ"),
            h.look("部屋を見やると$univが眠りこけている他の二人を見て微笑している。",
                "$childの柔らかい髪を撫で", "$studentのお腹にはタオルケットを掛けてやる"),
            h.think("危険はない。",
                "自分にそう言い聞かせてみるけれど",
                "頭の中の警戒ランプは消える素振りを見せない"),
            h.think("ただ距離を置いたことで少しずつ落ち着いて考えられるようになり始めた"),
            h.look("$n_univ_kyokoと名乗った彼女は",
                "二人の前から動こうとはしない。",
                "待ってくれているのか", "それとも何か事情があるのか"),
            w.combine(
            h.think("$ln_miura先生には$i_IFというのは自分の無意識が作り出したものだから",
                "決して自分自身を傷つけるようなことはしないと教わった。",
                "事実", "怒鳴ったり喚いたりはするけれど",
                "$meが彼女たちに傷つけられたということはない。"),
            h.think("それでも彼女たちを生み出す時は何か強いストレス下にあって",
                "それを緩和する為に彼女たちが必要になるのだと言われた"),
            ),
            h.look("ちらり", "と肩越しに$univが$meを見る"),
            h.look("彼女は暫くそのまま$meを見ていたが",
                "何を思ったのか笑みを見せると",
                "テーブルに置いた携帯電話を手にする。",
                "躊躇なくボタンを押すと",
                "電話のコール音が鳴り響いた"),
            kyoko.ask("何", "してるの？"),
            h.move("$meは嫌な予感がしてコップとペットボトルを置いて",
                    "慌てて部屋に戻る"),
            w.father.talk("はい。もしもし。",
                    "$kyokoかな？"),
            h.hear("スピーカーから漏れ聞こえたのは",
                    "父の声だった"),
            )

def sc_testperiot(w: wd.World):
    kyoko, shota, child, stu, univ = w.kyoko, w.shota, w.child_kyoko, w.student_kyoko, w.univ_kyoko
    h = kyoko
    return w.scene("テスト期間",
            kyoko.be(w.stage.library, w.day.report1),
            h.deal("八月に入り", "テスト期間も三日目を迎えていた"),
            h.look("図書館には$meと同じように一人でレポートや試験勉強をしている生徒が殆どだ"),
            univ.talk("みんな真面目に勉強しているけれど",
                "今やっていることが社会に出て役に立つなんて思っていないし",
                "そもそもが目の前の片付けなきゃいけない問題をこなしている作業でしかない。",
                "そう思うでしょ", "$kyokoも"),
            h.look("右の肩越しに話しかけてくるのは$univだ。",
                "赤い眼鏡がちらつくのが", "何とも集中力を奪っていく"),
            kyoko.talk("せめて静かにしておいてもらえない？"),
            h.look("小声でそう抗議するけれど",
                "「どうせ誰にも見えないでしょ」と構う気はない"),
            h.look("彼女は$meの周囲であれこれと話しかけていたが",
                "相手にされないと分かると",
                "他の人の机に出かけていっては後ろから覗き込んだり隣に座ったり",
                "頬を突いたりし始める"),
            kyoko.talk("ちょっと！"),
            h.behav("だからつい声を出して立ち上がってしまったが",
                "当然$univは他の人たちに見えていないので",
                "$meは試験でノイローゼ気味の学生にでも見られてしまったかも知れない。",
                "そんな一瞥を幾つも受けて",
                "$meは縮こまって頭を下げると",
                "何も弁解せずに鞄にノートを入れて図書館を立ち去った"),
            w.tag.br(),
            univ.talk("ねえねえ。",
                "なんで勉強やめちゃったの？",
                "他の人のことなんてそんな気にしなくてもいいのに。",
                "何も言ってこないならいないのと同じじゃない？"),
            h.move("大学の構内を歩きながら",
                "$meは何故彼女がここにも現れたのか考えていた"),
            univ.talk("見えててもいないのと同じなら",
                "それこそ$i_IFみたいなものだよね。",
                "ふふ。",
                "$meたちと同じ。",
                "そう考えれば", "もっと楽に生きられるんじゃないの？"),
            h.look("$univは$meの前に立ち",
                "笑みを消し去った瞳をまっすぐに向ける"),
            h.move("それを無視して脇を通り抜けると",
                "ドアを押して外に出た"),
            h.look("並木で影ができた道路を自転車が抜けていく。",
                "その先を疎らに学生たちが歩いていたが",
                "別の方向は全く人影がない"),
            h.look("携帯電話で時間を確認するとあと三十分ほどで昼になる。",
                "空は雨知らずに晴れていて",
                "小さな雲がゆっくりと流れていた"),
            h.move("どこか適当な木陰で昼ご飯にしようと歩き出す"),
            univ.talk("無視していればいつかは消えてしまう。",
                "もしそうなら",
                "あなたはどうして$childたちを無視しなかったの？"),
            h.look("$univはずっと喋ることをやめない。",
                    "テスト期間のストレスなのか",
                    "それとももっと大きな",
                    "そう",
                    "家族のことに対する精神的な問題の影響だろうか"),
            h.think("今年のお盆も実家には帰らない"),
            h.think("そんな心の安寧を決めていた$meに",
                    "週末", "父が会いに来る。",
                    "出張のついでと言われたが",
                    "あまり電話もメールも寄越さず",
                    "今年の正月の旭川への帰省も見送ったから",
                    "流石に心配になったのだろう"),
            h.look("道を離れて木陰を歩いていく"),
            h.think("今の父は好い人だ。",
                    "そう思う"),
            h.think("けれど好い人かどうかは$meにとってはあまり関係がない。",
                    "それよりは苦手かどうか",
                    "というただ一点が", "$meをいつも苦しめる"),
            univ.talk("……だからさ",
                    "顔合わせすればお小遣い貰えるな",
                    "くらいに考えておけばいいのよ。",
                    "話なんてどうせ大学うまくやってるかとか",
                    "そんな当たり障りのないものばかりなんだし"),
            h.hear("$univの声は徐々に小さくなっていた"),
            h.think("そのうちに彼女の声だけが響くようになり",
                    "やがて姿が見えなくなってしまう"),
            h.feel("振り返った$meの首筋を風が抜けていき",
                    "完全に彼女がいなくなったことを確認すると",
                    "$meは木の根元に腰を下ろす"),
            h.deal("鞄から取り出したおにぎりは",
                    "押しつぶされて形が歪んでいた"),
            )

def sc_meetingdad(w: wd.World):
    kyoko, shota, child, stu, univ = w.kyoko, w.shota, w.child_kyoko, w.student_kyoko, w.univ_kyoko
    h = kyoko
    dad = w.father
    return w.scene("父の出迎え",
            kyoko.be(w.stage.station, w.day.dadvisit),
            h.look("土曜日の札幌駅構内は流石の人の多さで",
                "中には$meと同じくらいの学生と思われる集団が大きな荷物を抱えて騒ぎながら待ち合わせをしていた"),
            h.look("携帯電話で父親からのメールか電話がないかと確認するが",
                "こっちに来る前に一度メールがあっただけで",
                "それ以降はまだ何も連絡がなかった"),
            h.think("時刻は二時を過ぎたところで",
                "予定では到着しているはずだけれど",
                "改札からそれらしき人物が出てくる気配はない"),
            h.look("$meは今一度", "自分の周囲を確認する"),
            h.look("$univはいない"),
            h.look("今日の$meの格好は白の七部丈のブラウスに紺のロングパンツで",
                "足元はスニーカーだ。",
                "けれど彼女はいつもやや露出の多い胸元の開いたシャツや丈の短いスカートを履いた姿で",
                "$meの目の前に突然現れる"),
            h.think("それは明らかに今までの$meの$i_IFたちとは違っていた"),
            h.think("いつ現れるか分からない彼女に対して常に見張られているような緊張感があり",
                "その為か", "最近家に帰っても疲れてそのまま寝てしまうことが増えていた"),
            dad.talk("$kyoko？"),
            h.hear("声は後ろからだった"),
            kyoko.ask("あ……"),
            h.look("振り返ると緑色をしたハーフフレームの眼鏡を掛けたストライプ柄のシャツを着たひょろりとした男性が",
                "鞄を手にして立っていた"),
            kyoko.talk("$dad……"),
            )

def sc_dadtalk(w: wd.World):
    kyoko, shota, child, stu, univ = w.kyoko, w.shota, w.child_kyoko, w.student_kyoko, w.univ_kyoko
    h = kyoko
    dad, cmam, cdad = w.father, w.cur_mam, w.cur_dad
    return w.scene("父の話",
            # NOTE: スープカレーの店、湯カリーダイニング、素揚げ、ビル２F
            kyoko.be(w.stage.famires),
            h.move("まだ昼ご飯を食べていないと言うので",
                "$meは彼の後について", "お勧めだというスープカレーの店に向かった"),
            dad.talk("しかし最近は本当に暑くなったね"),
            h.look("白い肌をした$fatherは日差しを右手で遮りながら路地を歩いていく"),
            dad.talk("$kyokoは夏バテしていない？"),
            kyoko.reply("え、ええ。", "たぶん大丈夫です"),
            h.look("そう。良かった。", "と笑顔を返すが",
                "目尻の皺や右のこめかみの下にあるシミに$fatherの年齢を感じてしまい",
                "$meの為に無理をさせているんじゃないだろうか", "という思いが余計に口を重くさせた"),
            dad.talk("そこの二階なんだ。",
                "素揚げした野菜を使っているんだが", "ほど好い辛さでね",
                "こっちに出てくる度に行くようにしているんだ"),
            h.move("$meは曖昧な微笑を返し", "彼に続いて階段を登っていく"),
            h.think("二人目の父親は$meが中学三年の秋に突然やってきたけれど",
                "あの日からずっと笑顔と微笑だけを$meに向け続けてくれている"),
            h.look("ドアの前には『$st_curry』と書かれていた。",
                "$fatherがそれを押して中に入ると",
                "ドアベルに続いて女性のやや固い声で「いらっしゃいませ」と響いた"),
            dad.talk("えっと……奥にしようか"),
            h.move("言われるがままにカウンター脇のテーブル席に座る。",
                "店内は二時過ぎという時間帯もあってか",
                "一人で食べに来ているお客が数名",
                "カウンターとテーブルに目に付いただけだ"),
            dad.talk("$kyokoも食べる？"),
            kyoko.reply("それじゃあ", "少しだけ"),
            h.look("$fatherが注文を済ませている間に鞄を隣の椅子に置いて座ると",
                "オープンキッチンで作業をしている二の腕の逞しそうな焼けた肌の男性店員を見やった"),
            cmam.ask("チキンカレー二つでライスは普通と小",
                "ですね？"),
            dad.talk("ええ", "お願いします"),
            h.look("笑顔を見せて会釈をした女性店員はキッチンスタッフの男性とは対象的に白く",
                "目の色がやや薄い。",
                "髪は染めているのとは異なる濃い黄金色で",
                "高い鼻と合わせてどこか外国の人の雰囲気があった"),
            h.look("時間帯なのか", "その二人以外にスタッフはいない"),
            dad.talk("出張があるからといって",
                "やはりこうして会いに来るのは$kyokoには迷惑だったろうか"),
            kyoko.reply("そんなことは", "ないですけど"),
            dad.talk("本当はね", "$asakoも一緒に来られれば良かったんだろうけど",
                "どうしても介護施設の方を休めないからってね"),
            h.feel("胃の上あたりがムカムカとしてくる"),
            dad.talk("$meだってそうそう休暇申請もできないから",
                "こうして仕事のついでじゃないと出てこられない。",
                "それでもやっぱりたまには顔を見ないとね"),
            h.think("悪気がないことは知っている。",
                "けれど$fatherだけならまだしも",
                "母親の顔がちらつき始めると途端に体が警鐘を鳴らし始める"),
            h.look("自分が知らず知らずに右拳をぎゅっと握り締め",
                "そこに脂汗が溜まっていたことに気づいて",
                "$meは慌てて周囲を確認する"),
            h.think("大丈夫。", "$univはいない"),
            dad.ask("$kyoko？"),
            kyoko.talk("あ、はい"),
            h.look("一瞬挙動不審になった$meのことを", "やや心配そうに$fatherが見る"),
            dad.talk("最近は", "その", "問題はないだろうか。",
                    "落ち着いているようだとは伝え聞いているけれど"),
            h.think("$ln_miura先生から定期的に家族への報告がなされていることは知っていた。",
                    "落ち着いている", "というのはそこに書かれていたものだろう。",
                    "ただ$univに関してはまだ何も話していないし",
                    "次の診察は九月に入ってからだった"),
            dad.talk("$kyokoが一人暮らしをしたいと言い出した時にね",
                    "$meも$asakoもそのことを一番に考えたんだよ。",
                    "$kyokoなら自分のことはちゃんと出来るし",
                    "特別生活に困るようなこともないから大丈夫だろうというのは分かっていたけれど",
                    "何があるか分からないからね"),
            h.look("前の父親と違って",
                    "$fatherはいつも$meから目を背けない"),
            dad.talk("それでも一年と四ヶ月ほどを無事に過ごしてくれて",
                    "その間に$asakoも少し落ち着いたし",
                    "それぞれにとって良い選択だったんじゃないかなって思うんだ"),
            h.look("ハンカチを取り出して額の汗を拭う。",
                    "その緑とオレンジのストライプ柄の趣味の悪さに母親がちらついて",
                    "どうしてこの人はあの女と一緒になったのだろうか",
                    "という思いしか湧き上がってこなかった"),
            h.think("声を荒げて怒ったりもしないし",
                    "人の話を適当に聞いて後から意見を変えるようなこともしない。",
                    "真面目と誠実と温厚を常に身にまとっているような$fatherは",
                    "だからこそ$meにとっての精神的苦痛の元凶となっていた"),
            cmam.talk("はい、お待たせしました"),
            h.look("五分ほどで注文したスープカレーセットが運ばれてくると",
                    "スパイスの良い香りが$meの毛羽立った気持ちを少しだけ落ち着かせてくれる"),
            h.look("楕円に湾曲した入れ物には薄く黄色みがかったスープに細かなスパイスの粉が浮かび",
                    "大きく切られた素揚げのナスや人参", "芋などが浸かっている。",
                    "$meの方のご飯は皿の上に小さく盛られ",
                    "それにレタス主体のサラダが付いていた"),
            dad.talk("それじゃあ", "いただこうか"),
            kyoko.reply("……はい"),
            h.deal("彼は一度手を合わせて",
                    "それからキッチンに戻った女性スタッフと男性スタッフを見て彼らにも軽く頭を下げて小さく「いただきます」を言った"),
            h.deal("だから仕方なく", "$meもそれに従う。",
                    "同じようにしたことで$fatherは満足そうな表情をしてスプーンを手に取ったが",
                    "別に$meがそれをしなかったところで",
                    "彼が機嫌を損ねるようなことはない"),
            h.think("それでも時に不自然なほど順序を守ったり",
                    "必要以上に礼節を重んじる様は",
                    "$fatherの本来の性格ではなく",
                    "$n_motherその人のものだと", "$meにはよく分かっていた"),
            h.feel("スープカレーは思ったよりもあっさりとしていて",
                    "後から胡椒などの辛味が口の中に浮かび上がってくる。",
                    "野菜は素揚げしてあるからか",
                    "ぷつり", "と弾けるように噛むと中から熱を伴った旨味が滲み出てきた"),
            h.deal("店内は冷房が効いていたけれど",
                    "すぐに$meの体内は温められ",
                    "目の前の具材は知らない間に胃袋へと溶けていった"),
            )

def sc_dadcomming(w: wd.World):
    kyoko, shota, child, stu, univ = w.kyoko, w.shota, w.child_kyoko, w.student_kyoko, w.univ_kyoko
    h = kyoko
    return w.scene("消えた私たち",
            kyoko.come(w.stage.apart),
            h.move("駅前で$fatherと別れてから",
                "何だかすぐにアパートに戻る気になれず",
                "適当に大学のキャンパス内をぶらついてから帰った"),
            h.think("$fatherは別れ際に「次の正月は実家に戻ってきて欲しい」と告げ",
                "母親から言付かったという封筒を手渡してから改札へと消えていった"),
            h.deal("封筒には手紙のようなものは一切入れられておらず",
                "ただ数枚の福沢諭吉が新札で揃えられていただけだった"),
            h.think("まだ日の沈まない明るい空を見上げながら",
                "その意味について思い悩む"),
            h.explain("母は$meが五歳の時に離婚し",
                "十五歳の時に再婚した。",
                "だから二人だけで暮らしたのは実質十年間だけなのだけれど",
                "二十歳の$meにとっての十年というのは結構存在が大きく",
                "特に離婚前後",
                "いつも苛立って$meを見ていた彼女の",
                "その目が未だに記憶から薄れてくれない"),
            h.look("溜息を落としてから顔を上げると",
                "アパートの階段に", "$shotaが座っていた。",
                "一人だ"),
            shota.ask("なんか", "元気ないね"),
            kyoko.talk("そんなことないけど……今日は$childと遊んでないんだね"),
            h.look("そう言い返した$meに彼は少し困ったように眉を顰める"),
            kyoko.ask("何？", "あのよく分からない結婚の約束の話だったら――"),
            shota.talk("違う。",
                "そのことじゃないよ。",
                "ただ$childたちがいなかったってだけで"),
            h.think("え……"),
            h.move("$meはそれを聞いて慌てて階段を駆け上がる。",
                "ドアに鍵を差し込むけれど震えて上手く入らない。",
                "やっと入ったと思ったら今度は回らずに",
                "それでも無理矢理に力を入れて解錠すると",
                "勢いよく中に入った"),
            kyoko.talk("$child？", "いる？"),
            h.look("誰も答えない"),
            kyoko.talk("$studentは？", "いないの？"),
            h.look("$meはひっそりと静まり返ったままの部屋に上がり込み",
                "そこに二人の姿のないのを確認すると",
                "一度外に出る"),
            h.look("階段の下を見たが",
                "そこに彼の姿も見えなくなってしまっていた"),
            )

def sc_univlife(w: wd.World):
    kyoko, shota, matsu = w.kyoko, w.shota, w.matsumoto
    return w.scene("三番目との大学生活",
            # NOTE: omitします
            # TODO: 三番目の意味、夏休みに入る
            kyoko.come(w.stage.univ, w.day.current),
            kyoko.meet(matsu),
            ).omit()

def sc_rebellion(w: wd.World):
    kyoko, shota, matsu = w.kyoko, w.shota, w.matsumoto
    return w.scene("三番目の反乱",
            # NOTE: ここも削除
            # TODO: ボランティア日、三番目が邪魔する、翔太郎が救世主
            kyoko.deal("四人の暮らし"),
            kyoko.deal("みんな出ていった"),
            ).omit()

def sc_missing(w: wd.World):
    kyoko, shota, child, stu, univ = w.kyoko, w.shota, w.child_kyoko, w.student_kyoko, w.univ_kyoko
    h = kyoko
    minori = w.minori
    return w.scene("一人になった私",
            h.be(w.stage.living, w.day.empty),
            h.deal("頭の上で携帯電話が鳴っている。",
                "アラームうるさいと思って手を伸ばしても届かない"),
            h.deal("仕方なく目を開けて手に取ると",
                "バイト先からの電話だった"),
            minori.talk("$kyokoどうしたの？",
                "何かあった？", "体調不良なら明日の分もお休みにしておくけれど"),
            kyoko.talk("すみません$minori。",
                "ちょっと夜更ししての寝坊です。",
                "今から準備して向かっても大丈夫でしょうか？"),
            h.think("頭だけは冷静にしなきゃいけないと",
                "何度か深呼吸をする"),
            minori.talk("夜更しして寝坊するようなタイプには思わなかったんだけど",
                "今から出かける準備してどれくらいでこっちまで来られそう？"),
            kyoko.talk("えっと……着替えて出るくらいですから"),
            h.deal("地下鉄の駅まで行く時間も考えてプラス十分多く伝えると「わかった」と$minoriは承諾してくれた"),
            h.deal("電話をテーブルに置いた$meはとにかくと顔を洗う"),
            h.look("鏡には目元が少し黒ずんで顔色の悪い自分が映っている。",
                "だから必死にその焦燥を洗い流そうと", "何度も顔に水を浴びせた"),
            h.think("$childたちがいない"),
            h.think("それは$meが一番望んでいたことのはずなのに",
                "何の予兆もなく消えてしまうとこんなに慌てるとは思わなかった"),
            h.think("ひょっとすると予兆めいたものはあったのかも知れないが",
                "新しく生まれた$univまで姿を見せず",
                "五歳の時に$childが生まれて以来", "$meは初めてまともに一人らしい一人を体験していた"),
            h.deal("化粧ポーチからベースクリームを出して一気に顔に塗る。",
                "とりあえず隈だけでも隠しておきたい。",
                "それから少しだけチークを引いて",
                "唇はリップクリームで充分だ"),
            h.look("化粧をしながら落ち着いていく自分を見ていると",
                "一人というのが本当に心細く生身でしかないのだと実感する"),
            h.deal("だからこうしてお面を作る。",
                "しっかりしてなくていい。",
                "綺麗でなくてもいい。",
                "女の子が化粧を覚えるのは",
                "孤独な生身を晒さないでいる為かも知れない"),
            h.move("リップを引き終えると鞄を手に",
                "午後の日差しが強い部屋の外へと出る。",
                "日焼け止めも塗った方がいいかも知れないと感じたが",
                "体は既に階段を駆け下り始めていた"),
            )

def sc_shotarowork(w: wd.World):
    kyoko, shota, child, stu, univ = w.kyoko, w.shota, w.child_kyoko, w.student_kyoko, w.univ_kyoko
    h = kyoko
    return w.scene("翔太郎と一緒",
            h.look("夕方までの勤務を終えると",
                "瞼の上に重りでも載せられた気分でビルを出た"),
            h.look("向かいのコンビニには旅行のツアー客だろうか。",
                "キャリーバッグを引いた外国人の行列が入っていく様を",
                "$meだけでなく他の通行人もやや驚きを持って眺めている"),
            shota.talk("他にも旅行客なんて沢山いるのに",
                "どうしてああいう人だけ注目するんだろうね"),
            h.hear("背後からの", "耳慣れた声だった"),
            kyoko.talk("$shota……なんで"),
            shota.talk("$kyokoが困ってそうだったから……かな"),
            h.look("そう答えて彼は照れたように鼻頭を指で掻いた"),
            w.tag.br(),
            h.move("五分後",
                "彼にどこかでお茶でもしようと誘われて",
                "人のごった返しているファーストフード店で適当に注文を済ませて",
                "二階の窓際の一画に席を取った"),
            shota.ask("それで",
                "$childちゃんたちはまだ見つからないの？"),
            h.look("彼はハンバーガーの包み紙を全部引っぺがしてしまってから",
                "躊躇なく大口でかぶりつく"),
            kyoko.talk("うん"),
            h.deal("力なく答えると",
                "$meはストローを加えてオレンジジュースを啜った"),
            h.look("席は入れ替わり立ち替わりにお客さんがやってきては",
                "空いた場所を埋めるように収まって", "談笑を開始する。",
                "一人で来ている人も多かったが", "大半が誰か友人知人と訪れているみたいだ"),
            h.think("そういえばこういう場所に男性と二人で来るの初めてかも知れない",
                "と気づいて途端に$meは頬が熱くなる。",
                "もっとちゃんと化粧をして出てくれば良かった"),
            shota.talk("もしあの子たちが本当にその$i_IFだとすれば",
                "消えたってことはもう必要なくなったからなんじゃないの？"),
            h.look("出会った頃から変わらない耳までを隠すマッシュルームカットの茶髪が",
                "冷房の風に靡く。",
                "口の端にソースを付けたまま",
                "そのくりっとした瞳で$meの心を覗き込むようにした彼は",
                "考え込んだまま何も言おうとしない$meのポテトを一本",
                "引き抜いて食べた"),
            kyoko.talk("そういうことすると",
                "怒られたんだ"),
            shota.talk("あ、ごめん。", "悪気はなかったんだ"),
            h.behav("そうじゃないの", "と首を横に振り$meは続ける"),
            kyoko.talk("$meの母親はね", "手順とか決まりとかにうるさい人だったの。",
                "いつもご飯は大皿に入っていて取り分けるんじゃなくて",
                "個人個人が小鉢なんかに盛られて", "好き嫌いせずに全部を綺麗に食べることを強要された。",
                "だから大好きな玉子焼きとかウインナーは決まった数以上には食べさせてもらえなかった"),
            h.think("一人暮らしになって一番自由になったのは",
                "食べ物に関する全てだった。",
                "食べ方", "食べる順序", "量", "箸の持ち方からナイフとフォークの使い方まで。",
                "何故そこまでを母である彼女が拘ったのか",
                "今でも$meには分からない。",
                "それでもその拘りは彼女を追い詰めるほどに彼女自身にとって必要なものだったのだろう"),
            h.think("そう。", "$meに$childたちが必要だったように"),
            shota.talk("色々な家庭があるんだね。",
                    "$meは食べることだけでなく色々な面でかなり自由にさせてくれたよ。",
                    "でも何でもしていい", "好きなものだけ食べていいっていうのは",
                    "本当に自分のことを考えてのことなんだろうかなって",
                    "この頃になって疑問に思うようになってさ"),
            h.look("彼は長い睫毛を瞳に被せて",
                    "その視線を$meから顔も知らない",
                    "けれど同じ空気を吸っている大勢へと向ける"),
            kyoko.ask("$meにはその気持ちはよく分からないけど",
                    "愛しているから何でもさせてやりたいというのは",
                    "何も親子に限った話じゃないと思う"),
            shota.talk("じゃあ$kyokoも$meを愛していたら",
                    "何でもさせてくれるの？"),
            h.look("突然食いつくように$meを見つめたから",
                    "慌てて椅子から立ち上がってしまう"),
            shota.ask("そのさ……まだ", "結婚の約束のこと",
                    "思い出してくれてないんだよね？"),
            kyoko.talk("ごめんなさい。",
                    "$me", "記憶が曖昧な時期があって"),
            h.behav("彼が顔を逸したことに安堵して",
                    "椅子に座り直す。",
                    "それでも少し距離を置いたままにしたのは",
                    "いつの間にか彼への警戒心が薄れていたことに気づいたからだ"),
            kyoko.talk("今でも五歳前後とか", "小学校の頃の教室の様子とか",
                    "訊かれてもうまく思い出せないの。",
                    "記憶喪失とは違ってただ思い出せないだけ。",
                    "ひょっとしたらその頃の$meは生きてなかったんじゃないのかなって思ってる"),
            shota.ask("生きて、ない？"),
            kyoko.talk("ええ"),
            h.deal("小さな噛み跡の付いたバンズの間から", "ソースが紙を伝ってトレイに落ちた"),
            h.look("どうしてか彼の目は$meではなく", "その落ちたソースを見つめていて",
                    "何度か「生きてない」と寂しそうに呟く"),
            kyoko.talk("実際に生きてなかった訳じゃなくて",
                    "その", "比喩表現というか",
                    "実感としてそうだったのかなって思うだけです"),
            shota.ask("$kyokoはさ"),
            h.deal("その彼の手が",
                    "オレンジジュースを取ろうとした$meの手を押さえる"),
            shota.talk("誰にも心を開かないまま生きていこうとしているの？"),
            h.feel("彼の指の形が分かるくらい", "$meの手にその熱が伝わった"),
            h.think("その所為だろうか。",
                    "心臓が少しだけいつもと違う風に跳ねた気がした"),
            )

def sc_promisedate(w: wd.World):
    return w.scene("デートの約束",
            ).omit()

def sc_sapporo(w: wd.World):
    kyoko, shota, child, stu, univ = w.kyoko, w.shota, w.child_kyoko, w.student_kyoko, w.univ_kyoko
    h = kyoko
    return w.scene("札幌",
            h.move("すっかり昼間の熱気が冷めた夜の駅前通りを",
                "人通りを掻き分けるようにして$meたちは歩いていた"),
            h.think("そう。", "$meたちだ"),
            h.look("$shotaの手がぎゅっと左手を掴んだまま",
                "$meを振り返ることなく横断歩道を渡っていく"),
            kyoko.ask("ねえちょっと"),
            shota.talk("もしさ", "$meが明日消えるとしたら……$kyokoはどうする？"),
            kyoko.ask("え？", "何？"),
            h.move("車の騒音に", "遠くで鳴り始めた救急車とパトカーのサイレンが重なる"),
            kyoko.ask("ねえ", "ちょっとってば"),
            shota.ask("$meがいなくなったとしたら",
                "いつか$kyokoは忘れちゃう？"),
            h.look("彼は一度だけ振り返り",
                "そう言って$meの答えを待った。",
                "けれどそんな質問にすぐ答えなんて用意できなくて",
                "口を半開きにしたまま何も言えないでいると",
                "再び彼は前を向いて遮二無二に歩き出した"),
            kyoko.ask("ねえってば！"),
            h.move("駅に向かうのかと思ったら彼はどんどん離れるように歩いていき",
                "やがて人波から外れるようにして細い路地に流れて行った"),
            h.feel("賑やかな通りから一本入ると少しだけ空気の色が違っていて",
                "$meたち以外に歩いているのはカップルばかりだった"),
            h.look("顔を上げると色味の違うネオンと店の名前が幾つも目に入り",
                "ここはそういうものが沢山ある場所なんだと急に意識し始めてしまう"),
            kyoko.talk("ねえ……$miya"),
            h.deal("何度か彼に呼びかけてみる。",
                "けれどぎゅっと握り締めた手の力が更に強くなっただけで",
                "もう$meと言葉を交わす気はないんじゃないだろうかと感じるほど",
                "何か今までとは別人に思えた"),
            shota.talk("入ろう"),
            kyoko.talk("え"),
            h.move("咄嗟に体が建物へと吸い込まれるようになって",
                "$meは抵抗することも出来ないまま",
                "公園のトイレの入り口みたいなレンガ調の壁を回り込んで", "その中へと入った"),
            # TODO: 連れ回されながら彼が何か追い詰められていると感じる、で誘われる
            )

def sc_hotel(w: wd.World):
    kyoko, shota, child, stu, univ = w.kyoko, w.shota, w.child_kyoko, w.student_kyoko, w.univ_kyoko
    h = kyoko
    return w.scene("ホテルで",
            kyoko.talk("$miya？", "ねえ帰ろう？",
                "せめて$meのアパートで"),
            h.think("何なのだろう。",
                "自分のアパートなら良いのだろうか"),
            h.look("初めて入った男女がそういうことをする",
                "所謂ラブホテルみたいな場所は",
                "どこに目を向けていいのやら分からず",
                "$meはただ彼に手を引かれるままにエレベータに乗って",
                "三階で降りた"),
            h.look("部屋に入るとドアが閉められ",
                "間接照明になっているところに置かれた巨大なベッドに",
                "彼だけが寝転がった"),
            kyoko.talk("一体何のつもり？"),
            h.look("やっと解放された自分の左手を擦りながら",
                "天井を見上げて大の字になっている彼に尋ねる"),
            shota.talk("もし明日消えるとしたら",
                "$kyokoに$meを忘れないでいてもらう為の方法って",
                "こういうことしかないんじゃないかって思うんだ"),
            kyoko.ask("明日消えるの？"),
            h.think("引っ越したりするのだろうか"),
            h.look("けれど彼は$meの問いには答えず",
                "手招きをする"),
            shota.talk("$kyokoもここにきて天井見てみなよ。",
                "面白い"),
            kyoko.talk("天井ならここからだって見られる"),
            h.look("そう言って顎を上げたところで",
                "$meの腕が引っ張られた。",
                "ベッドに顔から突っ込んだが",
                "布団の感触が想像以上に柔らかくて", "少しだけ良い匂いがした"),
            shota.talk("$kyoko"),
            h.look("上を向いた$meに",
                "彼が馬乗りになる"),
            kyoko.ask("$miya……やめて"),
            h.deal("彼の腕が両肩を押さえ込んで",
                "じっと見つめる小動物の瞳が", "潤んでいた。",
                "その彼の後側に",
                "薄っすらと沢山の星が見えて",
                "何だか急に切なくなる"),
            shota.talk("まだ", "思い出さない？"),
            h.hear("涙の混ざった声は", "いつもより子供っぽい"),
            kyoko.talk("ごめんなさい。",
                "でも本当にあなたと結婚の約束をしていたとしても",
                "今の$meじゃ結婚をしてあげられないわ。",
                "誰か他人との生活を受け入れられるほど", "強くないから"),
            shota.talk("$kyokoじゃなきゃ", "駄目なんだ"),
            kyoko.talk("それでも……ごめん"),
            h.deal("彼の頭が$meの胸元に落ちてくる"),
            kyoko.talk("ねえ！？"),
            shota.talk("ちょっとだけ……このまま"),
            h.hear("啜り泣きを始めた彼はそう言うと",
                    "$meの背中に腕を伸ばして思い切り抱きついた。",
                    "でもそれが全然不快に感じなくて",
                    "寧ろ$meは自分の胸元で泣いている生き物を愛おしいと思って",
                    "柔らかなマッシュルームの髪を抱き締めた"),
            h.feel("自分じゃない誰かを",
                    "抱き締める"),
            h.think("ただそれだけの行為がこんなにも自分を安心させてくれることを",
                    "この日初めて$meは知った"),
            h.deal("彼はそれ以上何も言わず",
                    "$meもそれ以上何も尋ねず",
                    "いつの間にか消えた間接照明は天井に夏の大三角をくっきりと映し出してくれた"),
            h.think("星空がこんなに近くに見える"),
            h.think("そう感じた刹那",
                    "$meの意識は隙間の闇に吸い込まれるようにして途切れてしまった"),
            w.tag.br(),
            h.look("自分の胸の上の軽さに驚いて",
                    "$meは目を開く"),
            h.look("まだ天井には星座がゆっくりと動きながら映し出されていたけれど",
                    "カーテンの外は既に明るくなっているのが分かった"),
            kyoko.talk("え……あれ……"),
            h.look("部屋には彼の姿はなく",
                    "$meは裸になることもないままラブホテルのベッドの上で一夜を過ごしたのだと気づいて",
                    "起き上がった"),
            w.tag.symbol("（『" + cnf.TITLE["chap5"] + "』に続く）"),
            )

# episodes
def ep_intro(w: wd.World):
    return (w.chaptertitle("混乱する私"),
            sc_afraid(w),
            )

def ep_anotherproblem(w: wd.World):
    return (w.chaptertitle("父親と友だちと私たちと"),
            sc_testperiot(w),
            sc_meetingdad(w),
            sc_dadtalk(w),
            sc_dadcomming(w),
            sc_univlife(w),# NOTE: omit
            sc_rebellion(w),# NOTE: omit
            )

def ep_moreanother(w: wd.World):
    return (w.chaptertitle("そして彼は消えた"),
            sc_missing(w),
            sc_shotarowork(w),
            sc_promisedate(w),
            sc_sapporo(w),
            sc_hotel(w),
            )

# outline
def base_info(w: wd.World):
    return ("chapter4", story(w), w.kyoko, w.matsumoto)

def story_outline(w: wd.World):
    return [
            ]

# main
def story(w: wd.World):
    return [w.chaptertitle(cnf.TITLE["chap4"]),
            ep_intro(w),
            ep_anotherproblem(w),
            ep_moreanother(w),
            ]


def main(): # pragma: no cover
    from src.anotherme.story import world
    w = world()
    return w.build(story(w))


if __name__ == '__main__':
    import sys
    sys.exit(main())

