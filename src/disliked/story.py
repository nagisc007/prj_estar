# -*- coding: utf-8 -*-
"""Story: The disliked you
"""
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')

from storybuilder.builder import world as wd
from src.disliked import config as cnf
THM = cnf.THEMES


# scenes
def sc_intro(w: wd.World):
    h = satomi = w.satomi
    return w.scene("導入部",
            w.tag.comment("主人公の一人称。嫌い連呼。その意味が最後で分かる"),
            h.think("拝啓", "あなたが$sukiです"),
            h.think("こんな一文から始めなければいけないことを",
                "あなたはどう思うでしょうか。",
                "いつも笑顔を絶やさなかったあなたなら",
                "$meが何を選択したところで怒ったりはしないでしょう"),
            h.think("それでも$meは考えてしまいます。",
                "あなたが決して$meに「$suki」と言わなかったことについて"),
            )

def sc_morning(w: wd.World):
    h = satomi = w.satomi
    ayano = w.ayano
    return w.scene("朝",
            h.look("都内に借りた３ＬＤＫは$meたち家族には随分と余裕のある入れ物でした"),
            h.look("別々にした寝室で目覚めると", "まだ乳離れできていない娘が既に起きていて",
                "ベビーベッドを抜け出しています。",
                "あなたが似合うだろうと着せたウサギの着ぐるみのようなパジャマは",
                "彼女の精神状態に反応して耳が動くという優れものでした"),
            h.look("見ればそれがだらりと垂れ下がっていて",
                "一瞬壊れているのだろうかと思ったけれど",
                "安心している時は下がるのだとあなたから教わったことを思い出しました"),
            satomi.talk("$ayano", "おはよう"),
            h.deal("ベッドから起き出した$meは",
                "彼女お気に入りの小さな円形のクッションにダイブしてご機嫌な娘をそのまま抱き上げると",
                "柔らかな髪を撫でてやります"),
            h.look("娘の濃い眉毛はあなた譲りで",
                "それが時に我がままにも思える頑固さを発揮して$meを困らせます。",
                "間違ったことは嫌いだというあなたによく似たその不純物のない瞳が",
                "$meは$sukiでした"),
            w.tag.br(),
            h.deal("忙しくても決してそれを口にはしないあなたは",
                "よく会社に泊まり込んだまま",
                "まだ小さな娘を持つ$meに着替えを持って来させました"),
            h.move("外に出れば道路を同じような形の色違いな車が行き交っています。",
                "ベビィカーの上でその騒音に渋い顔をした$ayanoは眩しかったのか",
                "盛大にくしゃみを放ちました"),
            h.think("越してきた時はまだ新興住宅地で", "それほどマンションも建っていなかったのに",
                "いつの間にか一戸建てよりも五階や八階の背の高い住宅が大きな陰を作るようになってしましたね"),
            h.think("そのお陰で近所にスーパーの入った商業施設もできたし良かったじゃないか",
                "とあなたは笑うのだけれど",
                "変わりゆくものはいつだって$meを不安にさせるということにあなたは気づかない"),
            h.think("会社までは電車を乗り継ぐか", "バスを使うか",
                "最悪タクシーを使うという選択になるが",
                "一人の時とは違って二人になる", "それも小さな娘と二人でということになると",
                "そうそう電車移動もしていられなくなります。",
                "バスも優しい人たちばかりなら良いけれど",
                "やはり不安は拭えないのです"),
            h.deal("大通りまで出て",
                "$meは手を挙げました"),
            h.look("車体は黄色と赤の派手なカラーリングで『半自動運転車』と書かれていて、"),
            satomi.talk("よろしいでしょうか？"),
            h.deal("出てきた運転手に手伝ってもらいベビィカーをトランクに入れてから",
                "後部座席に娘を抱いて乗り込みます。",
                "車内はほんのりとラベンダーの香りがしました"),
            h.deal("$meが目的地を告げると",
                "音もなく車は動き出します"),
            h.look("助手席に平たくて黒い箱のようなものが積まれていて",
                "そこから複数のコードが前のカーナビ装置の下に連結されていました。",
                "モニタには地図に加えて『現在の自動運転レベル』と表示され",
                "今はレベル四と五を行ったり来たりしています"),
            satomi.talk("これって全然運転操作はしなくて良いものなんでしょうか？"),
            h.deal("シンプルな疑問を運転手にぶつけてみましたが",
                "やや目元の日焼けした中年男性は「ええ、そうですよ」と答え",
                "$st_geosysが開発中の$AIについて教えてくれました"),
            h.think("それは既に$meが持っている知識よりも随分と世間一般向けに簡略化されたもので、"),
            h.talk("まあ運転手の運転行動をそのままコンピュータ化したみたいなもんらしいですよ"),
            h.think("そんな風に言って「だから大丈夫ですよ」と笑われてしまいました"),
            h.look("車窓の風景はぐるりと回り",
                    "交差点を越えながらやがてオフィスビルが立ち並ぶ片側四車線へと移っていきます"),
            h.think("乗っていればそれが人間の運転なのか", "それとも機械の運転なのかはもう判断がつかない"),
            h.think("あなたはそう言っていたけれど",
                    "$meの隣で寝息を立て始めた$ayanoの落ち着いた顔を見ると",
                    "ひょっとして機械の方がずっと人間に優しいのかも知れないと思えてきます"),
            h.think("時々あなたは機械より人を$sukiなのかも知れないと口にしたことを思い出して",
                    "$meは自分がどちらの方が$sukiだろうと考えてみたけれど",
                    "この当時はまだどちらとも言えませんでした"),
            )

def sc_shopping(w: wd.World):
    h = satomi = w.satomi
    return w.scene("買い物",
            h.move("あなたは$meから着替えと弁当箱を受け取ると",
                "まだ数日掛かるからとすまなそうな表情を見せました"),
            h.think("それでも決して「すまない」と言葉にはしません。",
                "あなたは$meがその言葉を喜ばないことをよく知っているからです。",
                "$meにとって他人の言葉というのは精神の拘束具のようでもありました。",
                "それは$meの人生の二十年ほどが",
                "同じ名字の人間たちによって支配的だったことに起因しているのでしょうが",
                "クリニックの先生は、"),
            h.hear().emphasis("記憶というのは上書きすることもできるから",
                "あなたが支配されていると感じる幾つかの言葉もまた",
                "あなた自身で上書きをして変えてしまうことだって可能なのです"),
            h.think("そんな風に言ってトラウマという呪縛から何とか解放してくれようとしているけれど",
                "そう簡単に刷り込まれたものは変えられないと思うのです"),
            h.move("会社を出ると",
                "そのまま帰るのも勿体ないと思い",
                "ベビィカーを押しながらゆるやかな日差しの下を歩いてみました"),
            h.look("ビルの谷間にある小さな公園では同じような歳の子と一緒に遊ぶ",
                "本物の母親らしき女性の笑顔を見ることができました。",
                "彼女は$meとは異なり",
                "真っ直ぐな愛情を自分の子供に注いであげられる。",
                "そう感じるだけの混じり気のなさが$meにはとても眩しかったのを覚えています"),
            h.think("君の笑顔だって悪くないよ？",
                "というあなたの言葉が", "$meは$sukiです"),
            h.move("気分が塞ぎ込むな",
                "と感じた時にはよく駅前のショッピングセンターに行きました"),
            h.look("交差点を渡る時にガタリ", "と大きくベビィカーが跳ねたからか",
                "$ayanoが目を覚ましてもぞもぞと手足を動かし始めました。",
                "額が汗ばんでいて",
                "ハンドタオルで拭ってやったけれど", "まだ暑そうにしているから",
                "仕方なく自販機を見つけてそこで缶のココアを買いました"),
            h.think("本当は珈琲を飲みたかったけれど",
                "どんなに甘いものを選んでもそれを娘に飲ませる訳にはいかないからです"),
            h.look("額と頬に冷えた缶を当ててやり",
                "心地よさそうにしたところで", "プシュリ", "とプルトップを開けます。",
                "一口飲むとあなたが$sukiな感じの甘みが舌の上に広がります"),
            h.deal("$ayanoにも飲ませてやり", "一息つくと",
                "再び歩き始めました"),
            h.think("誰かのことを考えて飲み物を選ぶ。",
                "そういういつの間にか自分だけではない人生を歩いていることに気づくような瞬間が",
                "$meは$sukiです"),
            )

def sc_alone(w: wd.World):
    h = satomi = w.satomi
    return w.scene("孤独を感じて",
            h.think("あなたという呪縛から解放されたのは", "唐突でした"),
            h.hear().t("本当に残念ねえ。",
                "でも仕事で頑張りすぎてそのままというのは$fn_takaさんにとっても良かったのかも知れないわね"),
            h.look("葬儀の席で", "$meは他の親戚の人たちのようには泣けませんでした"),
            h.think("後で聞いた話だと", "旦那の葬式で泣かないような奥さんを貰った彼は可哀想だった等と話されていたそうです"),
            h.think("でも本当に心が冷たくなった時は",
                "人間らしい感情や行動なんて出てこないのです。",
                "それこそあなたが心血を注いで開発していたロボットたちのように",
                "周りの人を真似ることぐらいしかできない。",
                "その内側はどこまでも鋼のようにひんやりとして固いものです"),
            h.look("娘の五歳の誕生日を一緒に祝うことなく消えたあなたは",
                "$meへの最期の言葉すらないまま",
                "旧いデータのように勝手に削除されてしまいました"),
            h.look("泣き疲れて眠る$ayanoの手は",
                "それでもずっと$meの喪服のブラウスの袖を掴んでいて",
                "だからという訳ではないけれど",
                "へたり込んだまま", "ただ広いだけの３ＬＤＫのどこにも居場所を見つけられず",
                "$meも娘に寄り添うようにしてフローリングにそのまま寝てしまいました"),
            h.think("あなたが$sukiです"),
            h.think("ずっとあなたが$sukiでした"),
            h.think("いつも黙っていたけれど", "本当は口に出すべきだったのかも知れない。",
                "ただ言葉は自分の口から出ても相手の口から出ても同じで",
                "誰かを傷つける。",
                "それが分かっているから$meはいつも黙ることを選択するしかなかったのです"),
            h.look("けれど今", "娘の柔らかな髪を撫でながら",
                "彼女のあなた似の逞しい眉毛の尻が心地よさそうに下がるのを見つめて",
                "それを口にしておけば何かが変わったのかも知れないと思わずにいられません"),
            satomi.talk("あなたが", "$sukiです"),
            h.feel("乾き切った自分の下唇に触れると", "割れて薄く血が付きました"),
            )

def sc_bot(w: wd.World):
    h = satomi = w.satomi
    brian, bot = w.brian, w.bot
    return w.scene("ボット",
            satomi.talk("えっと……これは？"),
            h.look("$n_brianの毛深い手によって箱から取り出されたのは",
                "小型犬に似せて作られた機械の玩具のようでした。",
                "色は白く", "眉毛が付けられているのがどことなくあなたを思わせます"),
            brian.talk("$takaと二人で密かに開発していたものでね"),
            h.look("彼は小型犬の腹部にバッテリィをセットしながら説明してくれました"),
            brian.talk("簡単に言えば喪失緩和ボットといったところで",
                "当初のターゲットはペットロス症候群の人たちだった"),
            h.look("あなたと全然違うタイプに見える$fn_brianの",
                "電話での第一声は「$fn_takaの愛は永遠不滅だよ」でした"),
            h.think("あまりに能天気な声で",
                "$meはそれがあなたから聞いていた最高の仕事仲間の印象と違っていたから",
                "思わず電話を切ってしまうところでした"),
            brian.talk("けれどペットだけでじゃない。",
                "ロスを感じるものは他にも沢山ある。",
                "$takaはその中でも大切な人間の喪失について考えていたよ。",
                "でも彼が最初に声を掛けてくれた時に$meはてっきり『アンドロイドの恋人』を造りたいのかと勘違いしてね"),
            h.look("$fn_brianは大きな声で笑ものだから",
                "娘が起き出してきて彼を見てびっくりしていました"),
            brian.talk("おお！", "君が$takaのスウィートだね！"),
            h.deal("毛量が多く顎髭も逞しい彼がハグをしようと両手を広げますが",
                "$meに似て臆病な娘はすぐに自室へと引っ込んでドアに鍵を掛けてしまいました"),
            satomi.ask("あの人はいつか自分が$meたちの前からいなくなると分かっていたんでしょうか？"),
            h.look("苦笑を向けた彼に$meは尋ねます。",
                "もしあなたがそれを予感していたのだとしたら",
                "どうして何も話してくれなかったのでしょう"),
            brian.talk("そういう話を全然していなかった訳じゃないよ。",
                "けど$takaが考えていたのはもっと違っていて",
                "どんなに文明が進んでもどれだけ医療技術が発達しても",
                "物質的精神的に豊かになったとしても",
                "必ず訪れる誰かの死という不可避の悲しみを",
                "ほんの僅かで良いから和らげてあげられる。",
                "そういう人類に寄り添えるロボットなんだ"),
            h.look("彼が初期設定を終えて胸元の小さなハッチを閉じると", "キャンディのような丸い尻尾を引っ張った。",
                "小さなモータ音がして", "犬に似たそれが四肢で立ち上がります"),
            bot.talk("$satomi", "おはよう"),
            h.hear("それは紛れもなく", "あなたの声でした"),
            brian.talk("音声データは$takaのものを使わせてもらっている。",
                "不快なら", "デフォルトの合成音声に切り替えられるけども"),
            satomi.talk("いいえ。", "このままで構いません"),
            h.think("あなたの声は", "$sukiですから"),
            h.think("こうして$meたちと新しい”あなた”の暮らしが始まりました"),
            )

def sc_hiswords(w: wd.World):
    h = satomi = w.satomi
    bot = w.bot
    return w.scene("彼の言葉",
            h.think("新しいあなたに対しては不思議と生前に言えなかったことが素直に口にできました"),
            satomi.talk("ご飯の時に箸の持ち方がどうしても握り箸になるあなたのことが$sukiだった"),
            h.look("娘は今のところ何とか教えた通りに箸を使ってくれていたが",
                "スプーンはぎゅっと逆手で掴んで食べているので", "結局あなた譲りになりそうだと思っています"),
            h.look("ロボットだから充電さえしていれば餌は必要がない",
                "と説明を受けていたのに",
                "あなたはいつも$meたちと食事を共にすることを望みました"),
            bot.talk("食べられる食べられないという問題じゃなくて",
                "君たちと共に過ごすことが大事なんだ"),
            h.look("あなたの声でそう言う子犬型ロボットは",
                "食卓の上で満足そうに座っています。",
                "娘はそんなあなたに時々ちょっかいを出しては楽しそうに笑い声を上げて",
                "その度に$meは小さく拳を振り上げて「こら」と微笑むのです"),
            h.think("いつの間にか自然と笑うことに抵抗感がなくなり",
                "娘も元気に保育園へと通ってくれるようになりました"),
            h.think("旧いあなたは家にほとんどいなかったのに",
                "新しいあなたはいつも$meたちの傍にいてくれる。",
                "そんな単純な事実があなたの喪失感を埋めてくれるのだとしたら",
                "$meたちはあなたが消えてしまう前からずっとその喪失感を抱えていたのかも知れませんね"),
            satomi.talk("ねえ。",
                "あなたはどうしていなくなったの？",
                "$meたちの前からいなくなりたかったの？"),
            bot.talk("いなくなりたかったのなら",
                "$meみたいなロボットを作ったりはしていない。",
                "君はいなくなって欲しかったの？"),
            satomi.talk("分からない"),
            h.look("$meがそう答えるといつも新しいあなたは黙り込んでしまいます。",
                "それは旧いあなたの癖でもありました。",
                "そんなところまで同じにしなくても良いのにと思うけれど",
                "同じだからこそほっとするということもあって",
                "質問の受け答えよりもずっと",
                "そういう小さな安らぎをあなたは大事にしていたのかも知れない", "と感じました"),
            satomi.talk("あなたのそういう言葉にならない気遣いが", "$sukiです"),
            h.look("$meがそう口にすると",
                "子犬の目が小さく赤く明滅します。",
                "何に使えばいいのか分からないけれど",
                "新しいあなたには録音機能があって",
                "$meは新しいあなたが家に来て以来",
                "ふとした時にあなたに対して言っておきたかったことを録音していました"),
            h.think("でもその多くは", "ただあなたが$sukiですという", "それだけを伝えた言葉たちばかりでした"),
            )

def sc_frontgrave(w: wd.World):
    h = satomi = w.satomi
    ayano, bot = w.ayano, w.bot
    return w.scene("あなたの墓前",
            h.think("あなたが亡くなって", "一年が過ぎました"),
            satomi.talk("$ayano", "こっちよ"),
            h.look("次の春から小学校に通うようになる娘は",
                "どうしても見せたいからとオレンジ掛かった色のランドセルを背負ったまま",
                "両手で水桶を抱えてよちよちと歩いてきます"),
            h.look("体は$meに似て小柄で細かったけれど",
                "近頃顔つきとその逞しい眉がますますあなたに似てきたと思っています"),
            h.look("その彼女の後から白い子犬に似たあなたが", "見守るようにして付いてきます"),
            ayano.talk("$botは先いってて"),
            bot.talk("先に行ってもいいけど",
                "またすぐに戻ってくるよ？"),
            ayano.talk("それじゃあ$meが見えないところで歩いてて"),
            h.think("あなたは「はいはい」といつもの返事をして",
                "$ayanoの真後ろに移動してそっと付いて歩く"),
            h.look("そのやり取りの様は$meが苛立った時にいつもあなたがしてくれた",
                "結局どうやっても敵わないな", "と思わせる優しさを思い出させます"),
            satomi.think("その優しさが$sukiでした"),
            h.look("小さな墓石が並ぶ中に",
                "$n_takaと書かれたものを見つけます。",
                "誰かが来たのか半分ほど残った線香とあなたの好物のきな粉餅味のチョコレートが一つ",
                "供えられていました"),
            h.think("偏食の$meと違い",
                "あなたは何でも美味しいと食べていたことを思い出します"),
            ayano.talk("$takaはここ？"),
            satomi.talk("そうよ。",
                "$meたちによく来てくれたって笑っているわよ"),
            ayano.talk("$taka見えないよ"),
            h.look("見えない。",
                "娘は正直です。",
                "$meの目にもあなたは見えない"),
            satomi.think("見えなくなってしまったあなたが$sukiです"),
            h.deal("$meは線香を取り出すと",
                "$ayanoがお水を上げている間にそれに火を点けます"),
            satomi.think("火は危ないからと",
                "$meよりも不器用なあなたが必死になってライターを使おうとしましたね",
                "そんなカッコつけなところが$sukiです"),
            h.look("ふぅ", "と吹き消すと駄目だからと手で扇いで何とか炎を消すと",
                "娘に「気をつけて持つのよ」と一本だけ渡します"),
            h.deal("それが倒れないように手を添えて立たせてあげると",
                "$meの分も突き立て", "しゃがんでそっと手を合わせました"),
            h.look("娘もそれを真似て手を合わせ", "口をぎゅっと結んで目を閉じます"),
            h.look("何故かその隣で小型犬のあなたも前足を合わせていました"),
            h.look("$meと目を合わせてすぐに墓の方を見やります。",
                "そういう悪戯心を持ったあなたが$sukiでした"),
            h.think("目を閉じて",
                "これまでにあなたに伝えた沢山の$sukiを思い出します"),
            h.think("分かっています。",
                "あなたが消えてしまってからいくら口にしてみても",
                "それは新しいあなたにしか届かない。",
                "生きて", "声が届く間にちゃんと伝えていたら",
                "何かが変わっていた。",
                "そんなことは今更思わないけれど",
                "毎日のように小型犬となったあなたに",
                "$meがどれだけあなたを$sukiだったか吹き込んだことで",
                "こんなにも自分の中であなたが大きな存在だったのだと実感できたのです"),
            satomi.talk("それなのにどうしてあなたは",
                    "$meたちにこんな間に合わせの玩具を与えたのですか？"),
            h.think("墓石の向こうからあなたが答えられないのを知っていて質問する$meは",
                    "卑怯者かも知れません。",
                    "それでも言わずにはいられなかった。",
                    "だっていくら新しいあなたに伝えてみたところで",
                    "本物のあなたには何も伝わっていないことを知っているから"),
            bot.talk("拝啓",
                    "$satomi",
                    "それに$ayano。",
                    "この声を聞いているとしたら",
                    "それはもう$meが君たちの前から消えてしまったということなのかも知れない。",
                    "だとすると",
                    "色々と迷惑を掛けたね"),
            h.hear("話し始めたのはただの玩具の中のあなただと分かったのに",
                    "それは紛れもなくあなた自身の言葉でした"),
            bot.talk("ずっと$satomiの言葉を聞いてきて",
                    "その気持ちを聞いてきて",
                    "$meがどれだけ君たちを喜ばせることができたのか",
                    "それに悲しませてしまっていたのかを",
                    "知ることができた"),
            h.look("$ayanoは目を閉じたまま", "あなたの声にじっと耳を澄ませているようでした"),
            bot.talk("消えてしまった今となっては",
                    "君たちの話を聞いてあげられるくらいしかできないけれど",
                    "でもね",
                    "一つだけどうしてもやり残したことがあって",
                    "それだけは何とか$satomiに伝えておきたいんだ"),
            h.think("そんなものは無かった。",
                    "そう思っていました。",
                    "家族からも親戚からも会社の人たちからも",
                    "何も預かっていない", "何も言っていなかったとしか聞かされていません。",
                    "けれど", "それは違っていたのです"),
            bot.talk("$satomi。",
                    "君は$meが一番最初に告白した時に",
                    "$sukiだと言った。",
                    "でも君とずっと過ごすうちにやがて君がそう言わざるを得なかった理由に気づいたんだ"),
            satomi.talk("理由……"),
            bot.talk("$satomi。",
                    "$meは君のことが$kiraiだ。", "大$kiraiだ。",
                    "けれど君にとって$kiraiとは$sukiのことだったんだね。",
                    "親だった人間からずっとそう言って蔑まれ傷つけられた君は",
                    "いつしか$sukiを$kiraiだと頭の中で書き換えることで",
                    "自分の心を守ろうとしたんだ。",
                    "それに気づいたから",
                    "$meは決して君が$sukiと言うのを止めなかった"),
            h.think("$meが一番初めにあなたから告白されて",
                    "それに対して思わず「$suki」と答えて奇妙な表情になったあの時のあなたを",
                    "忘れたことはありませんでした。",
                    "ああ", "この人もまた同じように",
                    "$meからは離れていってしまうのだろう。",
                    "消えてしまうのだろうと",
                    "そう思っていたからです。",
                    "けれどあなただけは違っていました。",
                    "$meがいくら$sukiと言っても笑顔でいてくれたのです"),
            h.think("あなただけが$meの$sukiを理解してくれていたのです"),
            bot.talk("だからね",
                    "最期に$meは",
                    "君の$sukiをちゃんと書き換えておきたかったんだ"),
            h.hear("彼がそう言うと",
                    "犬型の頭部から墓石に光が当てられ",
                    "ぼんやりとした$meとあなたと", "まだ小さかった$ayanoが映し出されました。",
                    "それはあなたがリビングに置いた小型カメラの録画映像。",
                    "そこに", "$meの声が重なります"),
            satomi.talk("拝啓", "あなたが$kiraiです"),
            h.think("それは$meが彼に録音した", "最初の言葉でした。",
                    "ただ$sukiの部分が「$kirai」に変わっています"),
            satomi.talk("あなたの笑うと細くなる目が$kiraiです"),
            h.think("次々に$meの$sukiが$kiraiに変わって流れていく。",
                    "これまでの$meの$sukiが$kiraiに上書きされていくのです"),
            ayano.talk("$satomi？"),
            satomi.talk("うん"),
            h.deal("それだけ言って涙を隠すように", "目を開けて$meを見上げた娘を抱き締めます"),
            ayano.talk("$meも$satomiが$kiraiだよ"),
            satomi.talk("ママも$ayanoが$kirai。", "パパも$ayanoも大$kiraiだよ"),
            h.think("こうしてようやく",
                    "$meはあなたに愛を伝えられました"),
            h.think("あちらの居心地は分かりませんが",
                    "私が行くまでどうかご自愛下さいね。",
                    "敬具"),
            # TODO: 嫌いの本当の意味
            )

# episodes
def ep_avant(w: wd.World):
    return (w.chaptertitle("アバン"),
            sc_intro(w),
            )

def ep_hisbot(w: wd.World):
    return (w.chaptertitle("代用品"),
            sc_morning(w),
            sc_shopping(w),
            sc_alone(w),
            )

def ep_reason(w: wd.World):
    return (w.chaptertitle("嫌いの理由"),
            sc_bot(w),
            sc_hiswords(w),
            sc_frontgrave(w),
            )

# outline
def story_baseinfos(w: wd.World):
    return [
            ("story", story(w), w.satomi, w.bot),
            ]

def story_outlines(w: wd.World):
    return [
            ("story", story(w),
                w.satomi.be(),
                w.satomi.be(),
                w.satomi.be(),
                w.satomi.be(),
                True),
            ]

# main
def world():
    w = wd.World("The disliked you")
    w.set_db(cnf.CHARAS, cnf.STAGES, cnf.DAYS, cnf.ITEMS, cnf.INFOS, cnf.FLAGS)
    return w


def story(w: wd.World):
    return (w.maintitle("背景、あなたが嫌いです"),
            w.satomi.be(w.stage.myhome, w.day.current, w.bot),
            ep_avant(w),
            ep_hisbot(w),
            ep_reason(w),
            )


def main(): # pragma: no cover
    w = world()
    return w.build(story(w))


if __name__ == '__main__':
    import sys
    sys.exit(main())

