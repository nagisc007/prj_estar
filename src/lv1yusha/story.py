# -*- coding: utf-8 -*-
"""Story: lv1 yusha.
"""
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')

from storybuilder.builder import world as wd
from src.lv1yusha import config as cnf


# episodes
def ep_intro(w: wd.World):
    outfield = w.stage.field1.insided("町の外")
    forest = w.stage.field1.insided("町の外の森")
    scenes = (
            w.scene("父の背中",
                w.tag.comment("なるべく説明文じゃなく世界観説明"),
                w.hero.look(forest).d("木漏れ日の中に飛び込むようにして", "落ち葉の山を踏み締めた"),
                w.hero.look("back").d("振り返ってみたがまだ父の姿は確認できない"),
                w.hero.go("run", forest, w.day.childhood).d("荒くなる息を何とか押さえようとして口に手を当ててみるが",
                    "すぐに自分の名を呼ぶ父の声が近いと分かり", "走っているのを止めてしまった"),
                w.father.talk(w.hero).t("$he_name", "$heroよ。",
                    "逃げてばかりでは目の前の問題は何も解決せんぞ。",
                    "分かっておるのか？"),
                w.hero.do().d("心臓が破裂しそうになるのを堪えながら太い幹の裏に身を隠すと",
                    "木刀を握る右手に力を込めた。",
                    "何としても一本を取る。",
                    "そうしないと今日の夕ご飯は食べさせないと$dadが言うのだ"),
                w.hero.hear("footsound").d("耳を澄ます。", "革靴が落ち葉を踏み締める音が徐々に大きくなる"),
                w.hero.look().d("木の葉の隙間から角度のついた細い陽光が差し込み一瞬",
                    "$myの右目を掠めた"),
                w.father.talk().t("気配が全然断てておらぬな"),
                w.hero.do().d("その刹那の躊躇いが$myの出足を鈍らせ",
                    "木陰から飛び出した時には既に$dadの振り下ろした木刀が己の右肩へと迫っているところだった"),
                w.hero.talk().t("痛っー！"),
                w.father.talk().t("その程度の痛みで目を閉じるな！",
                    "まだお前は生きているぞ。",
                    "ほら", "剣を構えて応戦するのだ"),
                w.hero.look(w.father).d("右の指先までが痺れてとても木刀を握っていられなかったが",
                    "何とか$dadの言うことに従おうと震える手で構えてみる"),
                w.father.talk().t("どうした$hero！",
                    "これが魔王の配下の一撃なら今ので命まで奪われているぞ！"),
                w.hero.do().d("まだ六歳の$myに大人の剣戟を受け止めきれるはずがない。",
                    "手にしていた木刀は跳ね飛び",
                    "$myは押される勢いのまま真後ろにあった太い樫の樹に強か背中を打ち付けた"),
                w.hero.talk().t("$child_dad", "なんで$meも剣を扱えるようにならないといけないの？",
                    "魔物は全部$child_dadが退治してくれるから$meには必要ないでしょ？"),
                w.hero.do().d("泣きそうになるのを必死で堪えながらそう訴える。",
                    "けれど$myを見る$dadの目は険しい"),
                w.father.talk().t("$meがこの世界の全ての魔物を退治できるなら或いはそういった主張も良かろう。",
                    "だがな", "今ここで百体もの魔物が一斉に襲いかかってきてみろ。",
                    "$meが一体を相手にしている間にお前を誰が守れるというのだ？"),
                w.hero.reply().t("……そんなの"),
                w.father.talk().t("泣いているお前に我が身が守れるのか？",
                    "$na_motherが守れるというのか？"),
                w.hero.talk().d("分かり切った質問に$myは返事すら出来なかった"),
                w.hero.look(w.monster1).d("その父の背後だった。",
                    "黒い影が飛び上がり鋭い五本の爪が閃いて木漏れ日を反射する。"),
                w.hero.do("襲われた", w.i.monster, outfield, w.day.childhood).t("$child_dad！"),
                w.hero.think().d("そう叫びながらも$myは思わず目を閉じていた"),
                w.father.talk().t("$hero。",
                    "誰の心配をしておるのだ？",
                    "相手が一体なら$meは誰にも負けぬわ！"),
                w.hero.hear().d("どさり、という重い音が響いた"),
                w.combine(
                    w.hero.look(w.father, "背中").d("それを耳にしてゆっくりと瞼を持ち上げると",
                        "そこには筋肉の盛り上がった父の偉大な背中がしっかりと$myの方に向けられていた。"),
                    w.hero.think(w.father).d("その強く温かい背中こそ",
                        "自分がずっと憧れて止まないものだと彼は思い出した"),
                    ),
                w.hero.talk().t("$child_dad！"),
                w.father.do("beat", w.monster1).t("さあ飯にしよう。",
                        "家で$na_motherがそろそろ痺れを切らしている頃だ"),
                w.hero.do("助けられた", w.father),
                w.hero.look(w.father).d("$dadは振り向いて",
                        "熊のような髭面を歪ませて笑った"),
                ),
            w.scene("剣の修行",
                w.day.first.explain("歳月が過ぎた").d("あれから十年の歳月が流れた"),
                w.hero.talk(w.bazem).t("手加減はしないで下さい", "$bazem！"),
                w.hero.look(w.bazem).d("木刀を斜に構え",
                    "$myは対峙する神官服の男を睨みつける"),
                w.bazem.reply().t("既に手も足も打ち身だらけになっているのに",
                    "これ以上打ち込んだら君の母親がまた怒鳴り込んでくるよ。",
                    "やる気を見せるのは良いことだがね",
                    "$hero", "時には分を弁えて引くということも立派な判断なのだよ"),
                w.hero.do("剣の練習", w.bazem, w.stage.church, w.day.first).t("それでは何の為の修行ですか！"),
                w.hero.be("十六に成長").d("もう十六にもなったのに",
                    "未だに町の防壁の外に一人で出る許可すら得られず",
                    "英雄$na_fatherの子という名称は単なる揶揄として彼に伸し掛かっていた"),
                w.hero.explain("体格も大きく").d("あの頃より大きくなった自覚はある。",
                    "けれど同世代の中でも小柄な方で",
                    "力比べでは花屋の$na_anabelにすら勝てない"),
                w.hero.think().d("そんな自分を$dadが見たらきっと笑うことだろう"),
                w.hero.ask(w.bazem).t("お願いします！"),
                w.hero.look(w.bazem, "白髪混じり", "微動だにせず隙きがない").d("渋面になった$na_bazemは首を横に振りながらも木刀を構えて見せる。",
                    "額が大きく露出し随分と後退した頭髪には幾らか白いものも混ざる。",
                    "それなのに打ち込む隙きというものが全くない"),
                w.bazem.ask(w.hero).t("どうしたのだ？",
                    "威勢は口だけか？"),
                w.hero.do(w.bazem, "やられる").d("不敵に笑われたが",
                    "それでも$myは打ち出せない。",
                    "その$na_bazemの視線がすっと彼の足元に落とされる"),
                w.hero.think().d("何か？"),
                w.hero.look().d("その一瞬の気取りが",
                    "視界から$bazemの姿を消し去る"),
                w.bazem.talk().t("注意を逸らすな"),
                w.hero.reply().t("すみません！"),
                w.hero.do().d("気づいた時には後頭部を木刀の先で小突かれ",
                    "$myは泣きたくなる"),
                w.hero.talk().t("卑怯ですよ$bazem"),
                w.bazem.reply().t("戦場では常に命を懸けたやり取りが行われておるのに",
                    "卑怯も何も無かろう。",
                    "騙されたなら相手が賢かったということだ。",
                    "それより$hero"),
                w.tag.comment("最近の魔物事情"),
                w.hero.ask().t("何ですか？"),
                w.hero.look(w.bazem).d("教会の裏手の木陰に腰を下ろし",
                    "布で首筋を拭いながら$na_bazemは話し出す"),
                w.bazem.talk(w.hero, w.i.monster, w.flag.increasing).t("お前は最近外に出ていないから知らぬだろうが",
                    "商店に並ぶ品物が少なくなっているとは思わなかったか？"),
                w.hero.remember().t("そう言えば$anabelが自分のところは良いけど何か困っている風なことを言ってたような"),
                w.bazem.talk(w.hero, w.i.case_caravan.flag()).t("もう一月ばかりになる。",
                    "一つとして商隊が町に来ておらぬのだ"),
                w.hero.think().d("商隊とは商人と積荷を守りながら町の間を移動する傭兵たちの部隊ことだ。",
                    "それが来ていないということは積荷も入ってきていないことになる"),
                w.hero.talk().t("海が荒れているという話は聞きませんが"),
                w.hero.think().d(f"この{w.stage.alaban.name}は三日月を大きくしたような島国で",
                        "大半の物資輸送を外洋からの商船に頼っている。",
                        f"港町{w.stage.minan.name}からは三日ほどの距離だが",
                        "この一年ばかり魔物がよく人を襲うので輸送には商隊が付けられるのが常だった"),
                w.bazem.reply().t(f"それが三日前から{w.stage.minan.name}と連絡が取れないと専らの噂だ。",
                        "真偽のほどは知らないが",
                        "昨夜祈りに訪れた旅の者が既に町が滅ぼされていたと言っていた"),
                w.hero.feel().d("その言葉には流石に口元を押さえて黙り込んだ"),
                w.bazem.talk().t("おそらく数日の内には状況が分かるだろう"),
                w.hero.think().d("つまり今現在", "調査部隊が派遣中ということだ。",
                        "そういった王室の表に出ない動きにも",
                        "$na_bazemはよく通じていた"),
                w.bazem.talk(w.hero, w.i.dadlost).t("お前の父が存命ならこのような心配もなかったのだろうがな"),
                w.hero.look(w.bazem).d("そう口にしてしまってから",
                        "$na_bazemは気づいてすぐに「すまぬ」と謝罪する"),
                w.hero.talk(w.bazem, w.i.becomeyusha).t("いいんですよ$bazem。",
                        "$meは大丈夫です。",
                        "それにあの$dadのことだ。",
                        "どこかで元気にやっているかも知れませんから"),
                w.hero.know(w.i.dadlost).d("$myは$dadの姿をこの十年", "見ていない。",
                        "それは$myだけでなくこの町の人間の誰もがそうだった。",
                        "風の噂では魔王退治の時に一緒に奈落と呼ばれる闇の穴に落下したらしい"),
                w.hero.go(w.i.voyage).d("いつかは$dadを探して世界を回りたいと思っていたが",
                        "今の己の技量ではとても叶わぬ願いだと", "自分自身でよく理解していた"),
                w.hero.be(w.i.becomeyusha),
                w.bazem.talk(w.hero, w.flag.strangerogue),
                ),
            w.scene("欠けた家族",
                w.tag.comment("ここで少しだけ家族の現状"),
                w.hero.go(w.stage.myhome, "朝食").t("ただいま"),
                w.mother.reply().t("朝ご飯までに帰る約束はどうしたの？"),
                w.hero.look(w.mother).d("テーブルには既にパンとスープが並べられ",
                    "頬杖を突く仏頂面の母親が入ってきた我が子のことを睨みつけていた"),
                w.hero.talk().t("……ごめん"),
                w.mother.talk().t("別にいいのよ。",
                    "$bazem様には色々と世話になっているし",
                    "何より$meじゃあなたに剣術の指導はしてあげられませんからね。",
                    "そうよ。",
                    "$meじゃ父親の……あの人の代わりは務まらないのよ"),
                w.hero.talk(w.mother, "剣の修行"),
                w.hero.think(w.mother).d("またいつものが始まった。",
                    "$myはそれに大きく頷きながらも「分かったから」と席に就いてパンを千切る"),
                w.hero.talk().t("いただきまーす"),
                w.mother.talk().t("$hero……分かってる？",
                    "$meはただ心配なだけなの。",
                    "あの人みたいにこの町を飛び出てどこか知らない場所で野垂れ死ぬなんてことになったら",
                    "$meは何を支えに生きていけばいいの？"),
                w.mother.explain("髪が長い", "最近目が見えづらい").d("近頃急に髪に白髪が混じり始めた母は",
                    "皺の増えた目を何度も擦る。",
                    "頼まれた針仕事も以前のように沢山はこなせなくなり",
                    "そのうちに別の仕事を考えなければいけないかも知れないと夜な夜な嘆いている"),
                w.hero.think().d("毛布を被りながらその小言を聞かされる度に",
                    "$myは思うのだ。",
                    "自分に本当に必要な技術とは剣術ではなく学問ではないのかと"),
                w.hero.talk(w.mother, "普通の仕事をしてくれても"),
                w.hero.think(w.mother, w.i.becomeyusha),
                w.hero.talk(w.mother, w.i.dadlost),
                w.hero.talk(w.mother, w.i.callhero),
                ),
            w.scene("呼び出し",
                w.tag.comment("ヴェルンは黒幕側だがそれを感じさせない"),
                w.hero.hear().d("ノックの音に最初に気づいたのは$myだった"),
                w.mother.ask().t("どなたかしらね？　はーい"),
                w.hero.look().d("$mamは立ち上がり",
                    "玄関のドアを開ける"),
                w.vern.come(w.stage.myhome).d("そこに立っていたのは詰め襟のかっちりとした制服を着込んだ赤髪の男性だった"),
                w.vern.talk(w.hero, w.i.callhero).t("こちらはオルンガ様のご自宅で宜しいですか？"),
                w.mother.ask().t("ええ、そうですが……貴方は？"),
                w.vern.reply().t("$meはアルアバンの宰相付の秘書官$callmeと申します。",
                    "この度はご子息である$hero様に我が王より直々にお話がありまして",
                    "城へ来ていただくようお願いに来たという次第です"),
                w.hero.ask().t("$meに", "王様が？"),
                w.vern.reply().t("はい。",
                    "出来ましたらその朝食を済ませられたらすぐに支度をしていらしていただきたいのですが",
                    "急でしょうか"),
                w.hero.look(w.mother).d("返答に迷った$myは一度母を見やったが",
                    "彼女は暗い顔をしたまま彼から目を逸らす"),
                w.hero.talk().t("分かりました"),
                w.mother.talk().t("$hero！？"),
                w.hero.talk().t("$mother",
                    "心配しなくても大丈夫だよ。",
                    "$meは$dadとは違う。",
                    "$dadのような英雄にはなれないから"),
                w.hero.think().d("そもそも当時既に町で一番の猛者だった$dadと今の自分では比べるまでもない。",
                    "おそらく何か別の用事で呼ばれただけだろう"),
                w.mother.talk().t("けど……"),
                w.hero.deal(w.i.callhero),
                w.hero.talk(w.mother, "no warry").t("ほんとに大丈夫だから。",
                    "ちょっと話をしてくるだけだよ。",
                    "そうですよね", "$vernさん？"),
                w.vern.reply().t("そのはずですが",
                    "詳しいことは$meには何も知らされておりませんので"),
                w.hero.look().d("$myは席を立ち",
                    "心配そうに見つめる母の肩に手を置いた"),
                w.hero.talk().t("すぐ帰ってくるよ", "$mother"),
                w.mother.talk().t("……"),
                w.hero.look().d("何度か$myは笑い掛けてみたけれど",
                    "$vernが帰ってしまっても一度として母は頷くことはなかった"),
                w.hero.go(w.stage.castle),
                ),
            )
    return [w.chaptertitle("旅立ちまでの序章"),
            *scenes,
            ]


def ep_heros_sun(w: wd.World):
    scenes = (
            w.scene("城へ向かう",
                w.hero.go(w.stage.town).d("朝食を終えるとすぐに一番綺麗な皮のベストを引っ掛け",
                    "アルアバン城へと向かった"),
                w.hero.go(w.stage.castle, "$must"),
                w.hero.go(w.stage.myhome).d("家を出る時に$mamは何度も$myの名を呼んでは振り返らせたが",
                    "そのうちに面倒になり手を挙げるだけになると",
                    "諦めたように最後には「いってらっしゃい」とか細く言ってくれた"),
                w.hero.look(w.stage.town).d("中央通りに出ると",
                    "開店準備をしている人や仕入れ客で商店街にはそれなりに人出があった。",
                    "ただやはり入ってくる物が少ないのか",
                    "どの店の人間も表情が陰っているように$myには思えた"),
                w.anabel.talk().t("$hero", "おはよ"),
                w.hero.look(w.anabel).d("明るい色の髪を二つのおさげにしたそばかすの女性が",
                    "花の余分な葉を落としながら$myに笑顔を向けた"),
                w.hero.talk().t("$anabel", "今日も元気そうだね"),
                w.anabel.talk().t("そんなことないわよ。",
                    f"{w.stage.minan.name}からの荷が入らなくなって",
                    "商店街の人たちピリピリしてるんだから"),
                w.hero.look().d("確かに彼女の言う通り",
                    "会話の端々に入荷のことが話題に上がっているようだった"),
                w.anabel.talk().t("うちはその点",
                    "北山の麓まで行ければ商売にはなるから安心してるけど"),
                w.hero.reply().t("けど以前みたいな魔物が出歩いているようなことになれば",
                    "あんな場所までなんてとても行けなくなる。",
                    "今だって時々一人で出かけているんだろう？"),
                w.anabel.talk().t("$heroよりは力も強いし足も早いのよ？",
                    "それにもし本当にピンチな時には駆けつけてくれるんでしょ？　ねえ"),
                w.hero.look().d("そう言って$na_anabelは顔を見上げてくる。",
                    "彼女の大きなオレンジの瞳が陽光を反射して何だかとても眩しかった"),
                w.hero.talk().t("まだあの日の約束覚えているのかよ。",
                    "あれは勢いで言っただけで"),
                w.anabel.reply().t("分かってるわよ。",
                    "でもね",
                    "今でも$heroが$hefatherさんが帰ってくると信じているのと同じように",
                    "$meも信じてるのよ。", "$heroが$meの英雄になってくれるってね"),
                w.hero.look().d(f"{w.anabel.name}は恥ずかしそうに暫く{w.hero.name}のことを見つめていたが、"),
                w.anabel_mam.talk().t("$anabelちょっと手伝っておくれ"),
                w.anabel.talk().t("はーい"),
                w.hero.look().d("店の奥から彼女の母に呼びつけられると",
                    "舌を出してアカンベェをしてから行ってしまった"),
                w.hero.think().d("何だよ。",
                    "可愛いじゃないか"),
                w.hero.go().d("そんなことを考えてしまった自分が恥ずかしくなり",
                    "$myは城への道を急いだ"),
                w.stage.town.explain("人々の賑わい").d("日は徐々に街全体を明るく照らしていたが",
                    "その半分が墨のような雲に隠され",
                    f"彼の行く手に濃い影を作っていた"),
                w.hero.meet(w.gandof),
                w.gandof.talk(w.hero, w.father),
                w.hero.look("sky", "怪しい雲"),
                w.hero.remember(w.day.dadvoyage),
                w.hero.go("hurry", w.stage.castle),
                ),
            w.scene("城内へ",
                w.hero.look(w.stage.castle, "gate").d("中央街を北側に抜け",
                    "石造りの橋を渡った先に巨大な城門が現れる"),
                w.gatekeeper1.look(w.hero).d("その門扉の前には二人の槍を手にした番兵が立っていたが",
                    f"{w.hero.name}の姿を見るなり表情を険しくした"),
                w.gatekeeper1.ask(w.hero, "用事").t("何用か？"),
                w.hero.reply(w.gatekeeper1, w.i.callhero).t("王様に呼ばれて来ました"),
                w.hero.look().d("それだけ言うと二人は互いの顔を見合わせ、"),
                w.gatekeeper1.talk().t("今確認する。暫くここで待て"),
                w.hero.look().d("一人は脇の小さなドアから中に入り",
                    "残った一人は$myを睨みつけたまま仁王立ちになった"),
                w.hero.do("wait").d("鈍色の甲冑は番兵の胸部と肩",
                    "膝から下を覆う比較的軽装のものだったが",
                    "それでも身につけたまま一日立っているには重そうな装備だと",
                    "$myは感じた"),
                w.day.first.explain().d(f"{w.anabel.name}ならニ、三曲歌い終えるほどの時間が過ぎたろうか"),
                w.hero.deal(w.i.callhero).d("中に確認に向かった一人が戻ってきて、"),
                w.gatekeeper1.talk(w.hero, w.i.herosun).t("失礼しました！"),
                w.hero.hear().d("突然頭を下げられた"),
                w.gatekeeper1.talk().t(f"まさかあの英雄{w.father.name}殿のご子息とは知らず",
                    "大変な無礼を働いたことお許し下さい"),
                w.hero.reply().t("父は父です。",
                    "それよりも許可はいただけたのでしょうか？"),
                w.gatekeeper1.talk().t("はい。",
                    "謁見の間にて王がお待ちです"),
                w.hero.look().d("そう言って再び頭を下げると",
                    "もう一人が「開門！」の声を上げ",
                    "金属製の巨大な門扉が地響きを立てて開いた"),
                w.hero.go(w.stage.castle.insided("城内通路")),
                ),
            w.scene("城内の様子",
                w.combine(
                    w.hero.go(w.stage.castle.insided("ホール")).d("門を抜けて花壇に彩られた小路を進むと",
                        "その先に整然と白い石を積み上げて建てられた王宮が姿を現す"),
                    w.hero.look().d(f"{w.anabel.name}は何度か仕事で中に入ったことがあり",
                        "綺麗とか豪華とか声を湧き立たせて教えてくれたが",
                        "彼はは今初めてそれらを目にしていた"),
                    ),
                w.hero.go().d("アーチになった入り口を潜る"),
                w.hero.talk().t("あぁ……"),
                w.hero.look("物珍しい").d("思わず声が漏れたが",
                    "真っ赤な絨毯が中央の大階段まで続いていて",
                    "見上げれば天井には色硝子の意匠が施されている"),
                w.hero.look().d("大理石の大柱には獅子や虎などの勇猛の象徴が削り出され",
                    f"それらの前に{w.stage.alaban.name}国の紋章である交差した薔薇剣が置かれていた"),
                w.vern.talk(w.hero).t("こういったものに関心がありますか？"),
                w.hero.look(w.vern).d("背後から突然声を掛けられて驚いたが",
                    "$myの家まで用件を伝えに来た秘書官だった。",
                    "確か$vernとかいう名だ"),
                w.hero.talk().t("どうも"),
                w.vern.talk(w.hero, "案内").t("ここは小さな島国です。",
                    "けれどそれだけに歴史はこの世界の中でも古い方になります。",
                    "本王宮は五十年前に再建されたものですが",
                    "その際に以前使われていた建材を流用したと聞いています。",
                    "今$hero殿がご覧になっている多くが",
                    "貴重な文化財でもあるのですよ"),
                w.hero.reply().t("はあ"),
                w.hero.look().d("流暢に語られた知識に面食らいながら$myは生返事をする"),
                w.vern.ask(w.hero, "大事な話").t("特に大丈夫なようでしたらこれより謁見の間にご案内致しますが",
                    "宜しいでしょうか？"),
                w.hero.reply().t("あ、はい。", "お願いします"),
                w.hero.think().d("正直どこをどう行けば目的地に着けるものか皆目分からなかったから",
                    "素直に$vernの申し出を受けた"),
                w.vern.ask(w.hero, w.brokens).t("ではこちらです"),
                w.hero.go(w.vern).d("そう言って歩き出した彼の背に続く"),
                w.hero.look().d("何をしているのか分からない多くの人間がいたが",
                    "大半は騎士や兵士といった武装した者たちで",
                    "彼らの視線はどれも$vernと共に歩く自分を斜に構えて見るものばかりに感じた"),
                w.hero.reply(w.vern),
                w.hero.have(w.brokens),
                w.vern.talk(w.hero, w.stage.castle.insided("謁見の間")).t("大階段を登って二階に行きます。",
                    "普段であれば大広間の先にある大謁見間を使うのですが",
                    "今回は事情があり",
                    "東通路の方の小謁見間の方でお話をされます"),
                w.hero.think().d("その違いがよく理解できない$myはただ「はい」と頷くしかなかった"),
                w.hero.go().d("$vernに続いて絨毯が敷かれた階段を上がると",
                    "左手に折れて通路を進んだ"),
                ),
            w.scene("英雄の子",
                w.hero.meet(w.stage.castle.insided("謁見の間"), w.king, w.day.first).d(f"開けられた窓からは北の{w.stage.abbas.name}に大きな影が落ちている様が見て取れた"),
                w.vern.talk().t("$hero様。", "こちらの部屋で王がお待ちです"),
                w.hero.look().d("他の部屋と見分けが付かない",
                    "特別な意匠もない木製のドアだった。",
                    "$vernは$myの頷きを確認すると",
                    "ドアをノックして「いらっしゃいました」とだけ言った"),
                w.king.talk(w.hero, w.i.herosun).t("通せ"),
                w.hero.hear().d("中から響いたのは男の声だったが", "それを受けて$vernは$myを見やると",
                    "ドアを開けて中に入るようにと促した"),
                w.hero.come(w.stage.castle.insided("謁見の間")).d("緊張気味に$myは部屋に足を踏み入れる"),
                w.hero.look().d("彼が入るとすぐにドアは閉じられ、"),
                w.king.talk(w.hero, w.father).t("よく来たな", "$fatherの子よ"),
                w.hero.look().d("執務用のどっしりとした机の向こう側に座る",
                    "胸元までの白い髭の男性とその両脇に控える制服姿の男たちに出迎えられた"),
                w.hero.ask().t("あ", "その", "どうも初めまして。",
                    "$me、いえ、わたしは$na_fatherの息子$myです"),
                w.hero.hear().d("緊張して上手く話せなかったのだが",
                    "それが気に入らないのか",
                    "王の右側の男が咳払いをする"),
                w.cornel.talk(w.king).t("$meは宰相を務める$myだ。",
                    "本来であればいくら彼の英雄の息子といえど",
                    "このような待遇での謁見は許されておらぬ。",
                    "だが事が事なので",
                    "特例として王自らがこうして面会されているのだ。",
                    "そのことを肝に銘じて口を慎むよう"),
                w.hero.look().d("宰相",
                    "という役割のことは$myにはよく理解出来なかったが",
                    "それでも今自分がいる場所が普通なら入れないところであり",
                    "こうして言葉を交わすことなど普段は許されていない存在が",
                    "王というものなのだと足りない頭に刻み込む"),
                w.king.talk(w.hero).t("して英雄の子よ",
                    "これから宰相が話す事柄についてはまだ誰も知らぬことだ。",
                    "しかし話さぬ訳にもいかぬ。",
                    "それを聞いた上で主に一つ頼みたいことがあってな。",
                    "できれば今ここでそれを拒否せぬと誓ってはくれぬか？"),
                w.hero.think().d("王直々に頼みたい",
                    "それは難しい言葉でいえば勅令と呼ぶらしいことは知っていた。",
                    "つまり今正に$myはその勅令を受けているということになる。",
                    "それはどのような理由が存在しようと拒否することは出来ない",
                    "絶対のものだった"),
                w.hero.reply().t("分かりました"),
                w.hero.look().d("その言葉に満足げに頷くと",
                    "王は宰相を見やり", "用件について説明するよう促した"),
                w.hero.know(w.i.worldinfo, "$not"),
                ),
            w.scene("知らされる事実",
                    w.cornel.do("caugh").d("こほん",
                        "とわざとらしい咳払いをしてから宰相は喋り始める"),
                    w.cornel.talk(w.hero).t("お前でもこの国の商品の多くが",
                        f"{w.stage.minan.name}を経由した外洋からの輸入に頼っていることは承知しておろう"),
                w.hero.reply().d("$bazemが言っていた話だろう", "と$myは直感した"),
                w.cornel.talk().t("それが数日前より入ってこなくなった。",
                    "そこで我々は連絡を取ろうと使者を送ったのだがそれも戻ってこない。",
                    "仕方なく今度は調査隊を組織し現地に向かわせた"),
                w.hero.look().d("宰相は淡々と事実を述べていくが",
                    "王の表情はその間ずっと険しさを漂わせたままだ"),
                w.cornel.talk().t("だが誰一人として戻ってはこなかった。",
                    "調査隊には我が軍の中でもかなりの手練が入っていたが",
                    "先日その者の頭部が何者かにより王宮の前庭に投げ込まれていた"),
                w.hero.feel().d("その様を想像して$myは思わず口を押さえてしまった"),
                w.cornel.talk().t("当初は内内で処理をしようと考えていたのだが",
                    "とてもそのような事態ではないと判断し",
                    "我が王の許可を得て最精鋭の者を調査隊として再び派遣した。",
                    "その中の一人が昨日ボロボロになって戻ってきて報告をしてくれたよ。",
                    f"既に{w.stage.minan.name}は壊滅し",
                    "外は凶暴な魔物で溢れているとな"),
                w.hero.think().d("それは$na_bazemから聞いて想像していた以上のものだった。",
                    "王国軍の精鋭が生き残れないほどの脅威というのは",
                    "自分の父が旅立った十年前の時とは比較にならないほど酷いものだ"),
                w.hero.talk().t("そ、それで$me",
                    "わたしに何を命じられるのでしょうか"),
                w.hero.think().d("力も知恵もない自分のような存在が",
                    "その事態に対して何か出来るとは到底考えられない"),
                w.king.talk().t(f"我が{w.stage.alaban.name}が代々勇者を輩出してきた国だというのは",
                    "知っておろう？"),
                w.hero.hear().d("口を開いたのはずっと黙り込んでいた王の方だった"),
                w.hero.reply().t("は、はい"),
                w.king.talk().t("そなたの父$fatherは勇者の称号を受けてはくれなかったが",
                    "それでもその活躍は周知のように勇者であったと$meは思っておる"),
                w.hero.think().d("そんな話があったとは初耳だ"),
                w.king.talk(w.hero, w.deflag.increasing).t("実は今朝も我が娘$princessが沐浴中に翼を持った魔物に襲われてな。",
                    "大事には至らなかったが",
                    "日に日に奴らの活動は以前のように",
                    "否", "以前よりもずっと脅威的になっておる"),
                w.hero.look(w.cornel).d("そこまで話して王が大きな溜息をつくと",
                    "宰相は自分が「代わりましょうか」と尋ねる。",
                    "だが王は首を振り", "$myに向き直った"),
                w.king.talk(w.hero, w.i.reviveboss).t("噂では魔王が蘇ったとも云われておる"),
                w.hero.know(w.i.reviveboss).d("それは$na_bazemも口にしていた"),
                w.king.ask(w.hero, w.i.case_caravan.deflag()),
                w.hero.know("$not"),
                w.king.ask(w.hero).t("なあ英雄の子よ",
                    "そなたが非力であることは宰相他多くの者からも聞いておる。",
                    "それでもだ。",
                    "勇者としてこの国を", "いや世界を救ってはくれぬか？"),
                w.hero.think().d("勇者。",
                        "その言葉の重さを考えるまでもなく自分には不釣り合いの称号だった。",
                        "もっと相応しい人物は王宮内でなくとも沢山いるだろう。",
                        "それなのに何故自分を"),
                w.hero.ask().t("それは$meが英雄の息子だから", "ですか？"),
                w.cornel.talk().t("なんだその無礼な口の利き方は！"),
                w.hero.look().d(f"{w.cornel.name}はその鋭い目を更にきつくして$myを睨みつけたが",
                        "無視してぎっと王だけを見返し", "改めて口にする"),
                w.hero.ask().t(f"英雄{w.father.name}の子だからですか！？"),
                w.king.reply().t("そうだ"),
                w.hero.look().d("重々しい返事だったが",
                        "王は眉一つ動かさずにそう答えると、"),
                w.king.talk().t("勇者であれば大いなる存在の加護が得られ",
                        "どのような軟弱な若者でも絶対に魔王を打ち倒せると",
                        "そう伝承で云われておる。",
                        "何よりその目。",
                        "お主の父にそっくりではないか。",
                        "それこそが主が勇者の資格を得るに足る器という証拠ぞ"),
                w.hero.look().d("とても七十を前にした齢の気迫ではなかった"),
                w.cornel.ask().t("して返答は？"),
                w.hero.look().d("落ち着いた声に戻った宰相が尋ねるが",
                        "$myは口を開くことが出来ないでいる"),
                w.king.ask().t("返事をするのだ", "英雄の子よ"),
                w.hero.reply().t("……分かりました。",
                        "喜んでお受けします"),
                w.hero.look().d("王の言葉に否とは答えられなかった"),
                w.vern.talk(w.hero, w.i.case_caravan),
                w.hero.ask(w.i.monster),
                w.vern.reply(w.hero, w.i.reviveboss),
                w.hero.talk(w.father, w.i.dadlost),
                ),
            w.scene("勇者誕生",
                w.king.ask(w.hero, w.i.voyage),
                w.king.talk(w.hero, w.i.dadlost),
                w.king.talk(w.hero, w.father),
                w.hero.reply(w.king, w.i.voyage),
                w.hero.go(w.i.voyage, "$must"),
                w.hero.deal(w.king, w.i.bustered).d("こうして$myは勇者となった"),
                w.hero.think().d("だがその事実はまだ部屋にいた王と宰相",
                    "見張りの騎士",
                    "それに部屋の外でずっと控えていた$vern以外は誰も",
                    "知らなかった"),
                w.king.talk("勇者誕生"),
                ),
            )
    return [w.chaptertitle("英雄の息子"),
            *scenes,
            ]


def ep_allies(w: wd.World):
    scenes = (
            w.scene("絡まれる英雄",
                w.hero.go(w.stage.castle.insided("城の外")).d("背中で城門が重々しい音を響かせて閉じられたのが分かったが",
                    "$myは振り返ることすらせずに反応の鈍くなった足を",
                    "何とか前に振り出して歩いていく"),
                w.hero.remember().d("勇者。",
                    "その言葉の重みが",
                    "精神どころか身体までも縛り付けているようだ"),
                w.hero.remember().d("王様や宰相は$myに必要なものは何でも準備してくれると言ってくれた。",
                    "だがそもそもこの町の防壁の外側に一人で出ることすら許されず",
                    "魔物一体まともに倒したことのない$myには",
                    "何を与えてもらったところでどうすることも出来ないだろう"),
                w.hero.think().d("それでも何もしないのはただの臆病者の所業だ"),
                w.hero.go().d("父の言葉を思い出し",
                    "$myはまず教会へと足を向けた。",
                    "$bazemなら頼もしい助言を与えてくれるだろうという期待からだ"),
                w.hero.go().d(
                    "町に戻った彼は商店街を抜けて北東へと通りを走った"),
                w.hero.look().d("暫く進むと木の板を貼り合わせたような粗末な住居が立ち並び始める"),
                w.hero.look().d("大半の町の者はここを避け",
                    "教会に行く時は南回りの迂回ルートを使うが",
                    "そういったことを気にしない$myはいつも最短距離を突っ切っていた"),
                w.marc.ask().t("おい小僧"),
                w.hero.meet(w.marc, w.deflag.strangerogue),
                w.marc.explain("ならず者風").d("そんな彼に声を掛けたのは",
                    "いかにも無頼漢な長身の男だった"),
                w.marc.ask(w.hero, w.i.herosun).t("小僧とはお前のことだ"),
                w.hero.reply().t("すみません。",
                    "先を急いでいるので"),
                w.hero.think().d("こういった人種には関わらないのが吉だ。",
                    "そう考えて駆け抜けようとする。", "だが"),
                w.marc.ask().t("逃げるのか小僧？",
                    "お前の父オルンガもあの世で泣くぞ"),
                w.hero.ask(w.marc, w.father).t("何故$dadのことを？"),
                w.hero.go("stop").d("その一言に立ち止まってしまった"),
                w.marc.talk().t("知らぬ者はおらんだろう。",
                    "この町一番",
                    "いや",
                    "この国一の有名人ではないか"),
                w.hero.look().d("そう口にしたが",
                    "男は無精髭の多い口元を歪ませて$myを見やると",
                    "何か含みがあるように舌舐めずりを見せた"),
                w.hero.ask().t("何なんですか"),
                w.marc.reply().t("いや何",
                    "少しばかり手合わせを願おうと思ってな"),
                w.marc.do(w.hero, "斬りかかる").d("突然だった。",
                    "男は懐から取り出したナイフを閃かせ",
                    f"{w.hero.name}に襲い掛かってくる"),
                w.hero.be("何もできない").d("咄嗟のことに何の準備も出来なかった$myは",
                    "その刃が自身の鼻先で留められるまで微動だにすることなくただ棒立ちしていただけだった"),
                w.marc.talk(w.hero, w.i.level).t("レベル１",
                    "といったところか"),
                w.hero.ask().t("れ、レベル？"),
                w.marc.talk().t("お前の強さの絶対値", "みたいなものだ。",
                        "$meなら３８ある。",
                        "ちなみにあそこで座り込んでいる爺さんはあれでも１０はあるぜ"),
                w.hero.think().d("男の言葉そのものは初めて耳にしたが",
                        "自分が弱いと貶められていることだけは理解できる"),
                w.hero.do().d("鼻先のナイフを掴んで遠ざけると",
                        "へらへらと笑みを浮かべた男を睨みつけた"),
                w.hero.ask().t("そもそも何なんですか？",
                        "$meが$na_fatherの子というだけでそうやってからかっているんですか？"),
                w.marc.talk().t("からかいにすらなってないんだがな。",
                        "まあいい。",
                        "お前の実力はよく分かった"),
                w.hero.look().d("男はナイフを仕舞い",
                        "腕組みをすると",
                        "$myに背を向けてからこう言った"),
                w.marc.talk(w.hero, w.i.gatherally).t("小僧。",
                        "仲間だ。",
                        "強く頼りになる仲間を集めろ"),
                w.hero.know(w.marc, w.i.gatherally).t("仲間？"),
                w.marc.talk(w.stage.bar, w.i.gatherally).t("そうだ。",
                        "お前はまだ弱い。",
                        "力も知恵もない。",
                        "おまけに年長者に対する礼儀もなってない"),
                w.hero.think().d("目の前の男も無礼な方だと思ったが",
                        "言い返さないでおいた"),
                w.marc.talk().t("だがその目だけは余人に代え難い輝きを秘めておる"),
                w.hero.ask().t("だからあなたは一体誰なんです？"),
                w.marc.talk().t("まずは酒場だ。",
                        "情報を集めろ。",
                        "人に頼れ。",
                        "お前があいつの息子なら",
                        "きっと活路を見出だせるはずだ"),
                w.marc.go("out").d("それだけ言うと男はそのまま教会の方へと歩き去った"),
                w.hero.deal(w.i.gatherally).d("$myはその姿を見送りながら教会に向かうべきかどうか考え込んだが",
                        "男の言葉が気になり",
                        "彼とは反対方向",
                        "つまり商店街の先にある酒場へと向かうことにした"),
                ),
            w.scene("酒場にて",
                w.hero.go(w.stage.bar, w.day.first).d("まだ日が高い内だというのに",
                    "その店の周囲だけ空気が淀んでいた"),
                w.hero.look().d("$na_anabelも親から近づかないように注意されていると言っていたが",
                    "これは見ただけで子供が行く場所ではないと分かる"),
                w.stage.bar.explain("薄暗い", "煙草やアルコール臭が漂う").d("そもそも店に入る前から煙草やアルコールの臭いが漏れ出ていて",
                    f"{w.hero.name}は自分の口元を覆いながらそのドアを開けた"),
                w.hero.look("酒場の人間たち").d("いらっしゃい",
                    "の一言もない。",
                    "薄暗い店内の奥の方",
                    "カウンター席になっていたが",
                    "そこで向かい合っていた男の相手をしていた店主らしき女性が気づいて視線を投げた"),
                w.hero.ask().t("あ、あの", "すみません"),
                w.barmaster.ask(w.hero).t("何だい？",
                    "親でも探してるのかい？"),
                w.hero.look().d("自分の母親よりも歳上だろう。",
                    "彼女からすればまだ親離れ出来ていない子供に見られても仕方ない"),
                w.hero.reply(w.i.gatherally).t("違います。",
                    "旅の仲間を探しに来たんです"),
                w.muronof.talk().t("ここにゃガキの遊び友達なんざいねえよ"),
                w.hero.look().d("泡の乗った酒を手に男は大口を開けて笑う。",
                    "前歯が何本か欠けているのが見えたが", "それよりも男の赤らんだ目の方がずっと恐かった"),
                w.barmaster.talk(w.hero, "無理だな").t("傭兵を探してるならちゃんとした斡旋所にでも行きな。",
                    "それとも生死を分かち合えるような本物の仲間を探したい",
                    "なんて言い出さないわよね？"),
                w.hero.reply().t("そのつもりだと答えたら",
                    "紹介してくれますか？"),
                w.hero.look().d("背を見せて帰ることも出来た。",
                    "けれどここで一歩を前に踏み出せないなら",
                    "おそらく今後どこでも自分は前に進むことが出来なくなる。",
                    "そう感じた$myはカウンターまで歩いて行き",
                    "王から預かったペンダントを見せた"),
                w.barmaster.talk().t(f"それは……{w.kingmark.name}じゃないかい。",
                    "あんた一体何者なのさ？"),
                ),
            w.scene("絡まれる英雄その２",
                w.diana.talk(w.hero).t(f"{w.rosensword.name}……つまり王から正式に認められた者である証。",
                    "それを持つ人間が誰かなんて決まっているじゃない"),
                w.hero.look().d("後ろからそのペンダントを取り上げたのは",
                    "$myよりも頭二つ分程度大柄な女性だった。",
                    "燃えるような真っ赤な髪が肩に掛かっていたが",
                    "その下に薄い皮の装備を身に着けている。",
                    "腰には大振りの剣も提げられていた"),
                w.barmaster.talk().t("$diana", "あんた二階で寝てたんじゃなかったの？"),
                w.diana.explain("長身", "酔っぱらい"),
                w.diana.talk(w.hero, w.i.herosun).t("酒が抜けちまったから降りてきたんじゃないのさ。",
                    "それよりあんた",
                    "これって本物？"),
                w.hero.reply().t("そ、そうですよ"),
                w.diana.talk().t("ふうーん、そう"),
                w.hero.look().d("長身の女は片方の頬を持ち上げて不敵に笑むと",
                    "$myのことを舐め回すようにじっくりと観察してから",
                    "その背中や腕", "臀部に触れた"),
                w.hero.ask().t("な、何するんですか！"),
                w.diana.talk().t("いやね",
                    "一応は鍛えているみたいだなと思ってさ"),
                w.hero.reply().t("一日として剣の練習は欠かしたことはないですよ。",
                    "ただそれでも$bazemには一度も打ち込めてませんけど"),
                w.hero.think().d("傍で目にしただけだが",
                    "装甲から覗くその腕は自分よりは遥かに絞られた筋肉だった"),
                w.diana.ask().t("お前の師匠とは誰だ？"),
                w.hero.reply().t("$na_bazem神官です"),
                w.diana.talk().t("へえ",
                    "あの変わり者で有名なあの神官様に弟子なんざいたのかい"),
                w.hero.look().d("バシバシと音をさせて肩を叩くものだから",
                    "その手を払いつつ$myは答えた"),
                w.hero.talk().t("$dadの旧友なんですよ。",
                    "だから本人も腐れ縁として教えてくれているだけだと思います"),
                w.barmaster.ask().t("あ！"),
                w.hero.feel().d("唐突に店主が声を上げる"),
                w.muronof.talk().t("何だよ$barmaster",
                    "急にでけえ声出しやがって"),
                w.barmaster.talk().t("この子ひょっとしてアレじゃない？",
                    "英雄の子"),
                w.hero.think().d("またその言葉だった。",
                    "三人の見る目の色が変わる"),
                w.muronof.talk().t("ああそうか。",
                    "お前$motherんとこの息子か。",
                    "そういや何か目元の辺りが似てらあなあ"),
                w.hero.look().d("知人なのか知らないが",
                    "男もバシバシと音をさせて$myの背中を叩きながら笑った"),
                w.barmaster.ask().t("それが仲間ってことは……まさか"),
                w.hero.look().d("女性店主は目を右往左往させながら口元を押さえると",
                    "その視線を長身の彼女の前に向かわせた"),
                w.diana.ask().t("あんたが$fatherの息子だって？",
                    "それもそのペンダントを貰ったってことは……"),
                w.hero.look().d("目を細めて彼女は$myを睨むように見つめる"),
                w.hero.ask().t("な、何ですか……"),
                w.hero.look().d("鼻と鼻がくっつきそうになるまで顔を近づけると",
                        "ふぅっ",
                        "と酒臭い息を吹きかけられ",
                        "$myは顔を顰めた"),
                w.hero.ask().t("本当に何なんですか！"),
                w.diana.reply().t("いやあ",
                        "何だか情けない面構えの男だと思ってさ"),
                w.hero.look().d("一体何を考えているのか分からないその長身の赤髪は",
                        "少し離れたテーブルの上に腰を下ろすと"),
                w.diana.ask().t("で？"),
                w.hero.look().d("と$myと目線を合わせて微笑した"),
                w.hero.talk(w.diana, w.i.herosun),
                w.hero.ask(w.diana, w.i.ally).t("実は魔王を退治することになったんです"),
                w.diana.talk("laugh").d("笑われるとは覚悟していたが",
                        "腹を抱えて彼女は大笑いする"),
                w.hero.look().d("客の男も店主も彼女ほどではなかったが",
                        "それでも珍しいものを見るようにまじまじと$myの顔を見つめながら",
                        "男の方などは指を差して笑っていた"),
                w.barmaster.ask().t("だからその為に仲間を集めようってことなのかしら？"),
                w.hero.reply().t("そう、です……"),
                w.hero.think().d("店主の女性はそれでも何とか笑わずにいてくれたが",
                        "その心遣いが逆に$myをこの場から逃げ出してしまいたくさせた"),
                w.diana.ask().t("仲間って言葉の意味",
                        "あんたは分かってんの？"),
                w.hero.look().d("声の調子が明らかに変わっていた"),
                w.diana.ask().t("ただの傭兵とは違うんだよ？",
                        "背中を預けるってことの意味が",
                        "坊やに理解できるのかね？"),
                w.barmaster.talk().t("ちょっと$diana",
                        "こんな子供に何真剣になってるのよ？"),
                w.diana.talk().t("子供かどうかは関係ない。",
                        "こいつは魔王を退治しようっていうんだ。",
                        "それが例え冗談だったとしても",
                        "その為に集めようって仲間は冗談なんて存在じゃ済まされないんだよ！"),
                w.hero.look().d("$dianaと呼ばれた彼女はテーブルを下りると真っ直ぐに$myの前まで歩いてくる。",
                        "それから腰の剣を抜き",
                        "その切っ先を向けてこう言い放った"),
                w.diana.talk(w.hero, w.i.level),
                w.hero.talk(w.i.becomeyusha),
                w.diana.ask(w.i.battle, w.hero).t("坊や。",
                        "あんたがもし$meに勝てたら",
                        "$meがその魔王退治とやらの仲間になってやるよ"),
                w.hero.reply("yes").d("何故彼女がそこまで仲間という言葉にムキになるのか分からなかったが",
                        "それでももしあの男が言ったように",
                        "これが何か道を切り拓く為のきっかけになるのであれば",
                        "拒否するのは勿体無かった"),
                w.hero.reply().d("だから$myは自分に向けられた剣の先を強く見返して、"),
                w.hero.reply().t("分かった"),
                w.hero.look().d("そうはっきりと返事をした"),
                ),
            w.scene("仲間を賭けた戦い",
                w.barmaster.talk("外でやれ"),
                w.hero.go(w.stage.bar.insided("店の外")).d("$myは壁に掛かっていた護身用の短剣を借りたが",
                    "店内は勘弁してくれと言われたので",
                    "$dianaと共に表に出た"),
                w.hero.look().d("カウンターで飲んでいた男も何故か一緒に外に出て、"),
                w.muronof.talk().t("$meが立会人をやってやらあな"),
                w.hero.look().d("そんなことを言うものだから彼女にも聞いてみたが",
                    "鼻先で笑って了承してくれた"),
                w.hero.ask(w.diana, w.i.ally).t("本当に良いんですよね"),
                w.diana.reply(w.hero, "yes").t("何がだ？"),
                w.hero.ask().t("仲間の件です"),
                w.hero.look().d("$myの問いかけに彼女は一度だけ頷くと",
                    "かかってこいとばかりに剣を構えた"),
                w.diana.talk().t("いつでも良いよ。",
                    "もしあんたが一度でもいい",
                    "$meの膝を地面に着けられたらそれで勝負にしてあげるよ"),
                w.hero.ask().t("そんなハンデは要らないです"),
                w.diana.reply().t("ハンデのつもりじゃなくて",
                    "あんたのレベルに合わせてあげただけなんだけどね"),
                w.hero.think().d("またあのレベルという言葉だった"),
                w.diana.talk().t("本気を出せばあんたは死ぬよ？"),
                w.hero.be("no move").d("ただ剣を前に構えているだけなのに",
                    "動くことができない。",
                    "それは気迫に負けたというよりも",
                    "今までに$myが味わったことない種類のものが彼女の剣から発せられていたからだ"),
                w.diana.do(w.hero, "圧倒").t("どうしたの？",
                    "かかってこないの？"),
                w.hero.be().d("$bazemより隙きがないんじゃないか",
                    "とすら$myには思えた。",
                    "とにかく動いた瞬間にやられる",
                    "としか感じられない"),
                w.diana.move().d("音もない足の運びだった"),
                w.hero.look().d("瞬時に距離を詰めると彼女はそのまま真っすぐに$myの額に剣の先端を下ろしてくる。",
                    "小細工はない。",
                    "ただ恐ろしく正確で速いだけだ"),
                w.hero.talk().t("くそお！"),
                w.hero.do().d("手にした短剣で受けるのは間に合わない。",
                    "それならば出来ることは一つしかなかった"),
                w.diana.talk(w.hero, w.i.level).t("弱いと死ぬだけなのよ"),
                w.hero.think("隙きができる").d("呟いてとても悲しい瞳をした"),
                w.hero.look().d("それを見ながらも$myは自分から前に詰める"),
                w.diana.talk().t("何だって！？"),
                w.hero.go().d("彼が狙ったのは真っ直ぐに打ち込んでくる彼女の足元",
                    "それも次に着地する右足の爪先だった。",
                    "そこに手にした短剣を低い姿勢で振り下ろす"),
                w.hero.look(w.diana, "つまずく").d("避けようとした彼女はそのまま大きくバランスを崩し",
                    "$myと交錯すると大きく前転して体勢を立て直した"),
                w.muronof.talk().t("そ、そこまでだ！"),
                w.hero.be().d("互いに振り返って次の一撃の体勢になっていたが",
                    "酒の臭いを振りまきながら男が間に割って入る"),
                w.muronof.talk().t("ひゃあ！",
                    "お前ら$meを殺す気か！"),
                w.hero.be().d("$dianaは振り下ろそうとした剣を寸でのところで留めると",
                        "苦い表情と共にそれを地面に突き刺した。",
                        "彼女は右側の膝をしっかりその地面に突いてしまっているのだ"),
                w.hero.ask().t("条件",
                        "でしたよね？"),
                w.diana.ask(w.hero, "罠"),
                w.diana.be(w.hero, "win").t("仕方ないね。",
                        "分かったよ。",
                        "あんたの勝ちだ"),
                w.hero.look().d("$dianaは溜息混じりにそう言ったものの",
                        "それでもどこか満足げに見える"),
                w.maririn.do().t("何わざと負けておいてさも彼の手柄みたいにしてんのさ"),
                w.hero.look().d("そこに拍手をしながら出てきたのは",
                        "肩までの派手なピンク色をしたおかっぱ頭の女性と",
                        "神官服に身を包んだ眼鏡姿の青年だった"),
                w.kult.come(),
                ),
            w.scene("仲間"),
                w.diana.talk().t("$maririn", "いちいちバラさなくても良いんだよ。",
                        "ほんっといつも人のやることなすことケチつけては笑いやがって"),
                w.maririn.come(),
                w.maririn.ask(w.diana, "なんでそんなこと？").t("そんな面倒なことしなくても",
                        "最初からあの英雄との約束だから仲間になるって言えばいいだけじゃない？"),
                w.hero.think().d("三人は知り合いのようだったが",
                        "ひょっとすると彼女の”仲間”なのだろうか"),
                w.diana.reply(w.maririn, "こいつの覚悟を知りたかった").t("約束だから仲間になる。",
                        "そんなことをあの人は許しちゃくれないよ。",
                        "それこそ自分の息子がどのレベルにあるのかを$meに見てもらいたかったに決まってるんだ"),
                w.maririn.talk("なら充分じゃん").t("$dianaこそあの人ってやつに妄想ぶちこみ過ぎ。",
                        "ね、あんたもそう思うでしょ？", "$kult"),
                w.kult.reply().t("えっと、あの……ええ"),
                w.hero.look().d("$kultと呼ばれた青年は何か文句が言いたそうにしたが",
                        "$maririnというピンク髪の女性に優しく睨まれると言葉を呑み込んで頷きを返した"),
                w.maririn.talk(w.hero, w.i.diana_reason).t("実はこのノッポの女ね",
                        "あんたの親父さんに惚れて……"),
                w.diana.talk().t("$maririn！",
                        "今すぐアンタの実家に叩き返されたい？"),
                w.maririn.talk().t("もう$dianaさんたら冗談だってばさ"),
                w.hero.look().d("先程までの緊迫感を漂わせた女性と同じ人物とは思えなかったが",
                        "そのやり取りに彼女たちがそれほど悪い人間ではないのだと思えて",
                        "$myは少し胸を撫で下ろした"),
                w.hero.know(w.i.diana_reason, w.father).t("あの、すみません"),
                w.kult.reply().t("何でしょうか"),
                w.hero.look().d("取っ組み合いを始めた女性二人に代わり",
                        "神官服の青年が答える"),
                w.hero.ask().t("うちの父と", "その", "知り合いなんですか？"),
                w.kult.reply().t("知り合い",
                        "というよりもそれぞれの恩人",
                        "のような人ですね", "あの方は"),
                w.hero.ask().t("恩人？"),
                w.kult.reply().t("旅先で厄介事に首を突っ込んでは事件や人間関係を解決する。",
                        "$meはそういう特別な方だと未だに思っています。",
                        "世間でいくら勇者や英雄と呼ばれていたとしてもね"),
                w.hero.think().d("確かにこの町で暮らしていた時から",
                        "見て見ぬ振りが出来ない性分だった。",
                        "母はそれが心労になっていたようだが",
                        "息子としてはどこか誇らしくもあり",
                        "そんな父の背中が憧れになったのだ"),
                w.hero.meet(w.diana, w.kult, w.maririn),
                w.hero.talk(w.diana, w.i.voyage).t("$dianaさん！"),
                w.diana.reply(w.hero, "yes").t("何さ？"),
                w.hero.ask().t("本当にいいんですよね？"),
                w.hero.look().d("その問いかけに彼女はピンクの頭髪を掴んだまま暫く考え込んでいたが、"),
                w.diana.reply().t("ああ！"),
                w.hero.be().d("その手を離して頭上に挙げて答えると、"),
                w.diana.talk("introduce").t("ついでにこの二人も仲間にしてやってくれ"),
                w.hero.look().d("そう言ってそれぞれに視線を向けた"),
                w.maririn.talk("introduce").t("$meはこの怪力だけの女戦士と違って",
                        "近代魔導書を全巻読破した知識の塊の魔法使い",
                        f"人呼んでマージナル{w.maririn.name}よ"),
                w.kult.talk("introduce").t("誰も呼んでないんですけどね"),
                w.hero.look().d("ぼそりと横槍を入れた$kultは駆けてきた$maririnに思い切り殴られていたが",
                        "赤く腫れた右頬を押さえながらも",
                        "見習い中の神官であることを教えてくれた"),
                w.hero.have(w.diana, w.i.coop).d("こうして$myは三人の心強い仲間を手に入れることが出来た"),
                w.hero.remember().d("道を切り拓く"),
                w.hero.look().d("これがあの男が言っていたことなのかどうかは分からないが",
                        "それでも天高く上がったお日様は湧き出る沢山の黒雲から何とか顔を出し",
                        "今後を祝福するかのような陽光を$myたちの頭上に降り注がせていた"),
            )
    return [w.chaptertitle("初めての仲間"),
            *scenes,
            ]


def ep_destruction(w: wd.World):
    scenes = (
            w.scene("街の外",
                w.hero.go(w.stage.field1).d("一旦家に立ち寄って母親に事情を説明してからにしようと思っていた$myの足は",
                    "何故か町の西門へと向かっていた"),
                w.hero.ask().t("いや$dianaさん。",
                    "本当に頼みます。",
                    "十年前に$dadが何も言わずに旅立ってしまった時は三日三晩泣き付かれてもう大変だったんですから"),
                w.diana.talk(w.hero, w.stage.tower1).t("だからさ",
                    "そんなあんたの母親を安心させる為にも",
                    "さくっとそこらで魔物の一匹でも倒して既成事実を作っちまえばって言ってるのさ"),
                w.hero.look().d("彼女は短い赤毛が大きく揺れるほど大笑いしたが",
                    "$myの母のヒステリィ具合を知らないからそんなに楽観的でいられるのだと",
                    "溜息を零した"),
                w.maririn.ask().t("それでさ"),
                w.hero.look().d("$maririnが後ろから追いついてきて顔を出す。",
                    "きらきらとした瞳が自分に向けられるのが分かって",
                    "$myは顔が熱くなる"),
                w.hero.reply().t("な、何ですか"),
                w.maririn.ask().t("このレベル１君がどうやって魔王を退治できるような立派な男に育てるおつもり？"),
                w.hero.think().d("レベル１君"),
                w.hero.think().d("自分では分からなかったが",
                    "どうやら誰が見ても$myはレベル１というものらしい"),
                w.hero.look().d("$maririnは笑みを浮かべながら$dianaに尋ねたが",
                    "彼女の方は「知らないよ」と首を振る"),
                w.diana.talk().t("適当に戦ってればそのうちに強くなる。",
                    "それが男ってもんじゃないの？"),
                w.hero.think().d("そんな簡単に強くなれるのであれば",
                    "十年の小さな積み重ねで$bazemに手痛い一撃でも浴びせられるようになっているはずだ"),
                w.hero.think().d("けれど現実は体が大きくなった以外に何の成長もない",
                    "と言わざるを得ない"),
                w.diana.ask().t("どうした$hero？",
                    "$meたちだって最初から強かった訳じゃない。",
                    "誰だって最初はレベル１なんだからそんな気にすることないさ。",
                    "なあ？"),
                w.maririn.talk().t("あら",
                    "$meは生まれた時からレベル５はありましたよ？"),
                w.diana.talk().t("何だと！",
                    "知らないと思って適当なこと言ってたらぶっ飛ばすからな！"),
                w.hero.look().d("随分と賑やかしい"),
                w.hero.think().d("けれどこれが「仲間がいる」ということかと考えると",
                    "$myはじんわりと笑みが広がるのが分かった"),
                w.kult.ask().t("どうかされましたか？"),
                w.hero.look().d("$kultだった。",
                    "前方を口論しながら歩いている女性陣二人を見やり",
                    "$myに苦笑を見せる"),
                w.hero.talk().t("いや",
                    "今まではいつも一人か$bazemと二人で修行をしてきて",
                    "こんな風に賑やかなことはなかったから"),
                w.kult.talk().t("これは賑やかというのではなく",
                    "騒々しいと呼ぶのです。",
                    "本当に$maririnには困ったもので",
                    "近頃お転婆に益々磨きが掛かってしまって"),
                w.hero.look().d("慣れているのか",
                        "彼は遂に頭髪の掴み合いまで始めてしまった二人を見ながらも止める気配はない"),
                w.hero.ask().t("大丈夫", "なんですよね？"),
                w.kult.reply().t("武器を持ち出さない限りは", "まあ"),
                w.diana.talk().t("何だとぉ！",
                        "$meがいつあの坊やに色目を使ったよ？",
                        "全然$fatherには似ても似つかない",
                        "精悍さの欠片もないあいつに惚れてたまるかよ！"),
                w.hero.look().d("彼がそう言った傍から$dianaは腰の剣に手を掛ける"),
                w.hero.ask().t("大丈夫", "ですよね？"),
                w.hero.look().d("だが今度ばかりは$kultは首を横に振ると、"),
                w.kult.talk().t("二人ともいい加減にして下さいよ！",
                        "地母神様の天罰が下りますよ！"),
                w.hero.look().d("剣を構えた$dianaと杖を取り出して呪文の詠唱を始めた$maririnの間に割って入ったが",
                        "二人が構わずに$kultを襲おうとしたので$myは声を上げて顔を覆った"),
                w.kult.talk().t("お二人とも冗談が過ぎます"),
                w.hero.hear().d("その声にゆっくり目を開くと",
                        "$kultの手がそれぞれに向けられ",
                        "そこから光の弾が膨らんで二人を包んでいた"),
                w.diana.talk().t("お、おい。",
                        "すまなかった。",
                        "な、わかったから",
                        "これ止めてくれ"),
                w.maririn.talk().t("喧嘩を止めるのにいちいち拘束魔法なんて使わないでよ！"),
                w.hero.look().d("よく見ればその光の中",
                        "二人は手足が虹色の鎖で縛り付けられていた"),
                w.kult.talk().t("ずっと探していた御人を見つけて浮かれるのは分かりますが",
                        "もう少し女性としての慎みをですね……"),
                w.diana.talk().t("何が女性として", "だよ。",
                        "その手の講釈は時代遅れも甚だしいぜ"),
                w.maririn.talk().t("それに別に浮かれてなんていませんことよ。",
                        "ねえ$dianaさん"),
                w.hero.look().d("互いを見合わせて歪んだ笑みを見せ合ったが",
                        "$kultが魔法を解くとすぐにその互いにそっぽを向いた"),
                w.hero.ask().t("仲良いんですか？"),
                w.kult.reply().t("そう思いたいんですけど", "どうなんでしょうかね"),
                w.hero.look().d("彼は答えて苦笑した"),
                w.diana.talk(w.hero, w.i.trial_tower).t("とりあえずさ",
                        "ここを出たらまず試練の塔に向かう"),
                w.hero.ask().t("それ", "何ですか？"),
                w.hero.remember().d("$na_anabelから城の西側の孤島に立つ古い塔の話は聞いたことがある。",
                        "ひょっとしてそのことだろうか"),
                w.diana.talk().t("歴代の勇者たちが出発の際には必ず立ち寄ったとされている",
                        "古い遺跡のことさ。",
                        "$heroでも西の孤島のことは知っているだろ？"),
                w.hero.reply().t("ええ。",
                        "でもあそこは船を使わないと渡ることが出来ないんですよね？"),
                w.diana.talk().t("外に出れば分かるが",
                        "今の海はとても船なんて出せないよ"),
                w.hero.think().d("それならばどうやってその遺跡に行くというのだろうか。",
                        "$myは他の三人を見たが",
                        "誰も答えてはくれない"),
                w.hero.talk().t("教えてくれないんですか？"),
                w.maririn.talk().t("勇者だけがそれを見つけられる。",
                        "そう言い伝えられているそうよ", "$heroちゃん"),
                w.hero.reply().t("ちゃ、ちゃん！？"),
                w.hero.feel().d("$maririnに頬を突かれた上にそんな呼び方をされ",
                        "$myは思わず立ち止まった"),
                w.kult.talk().t("$maririn",
                        "幼気な少年をからかわないであげて下さい"),
                w.maririn.talk().t("だって可愛いじゃん。",
                        "それに成長したら意外とイケメンになるかもよ"),
                w.hero.look().d("おまけにウインクまでされて",
                        "何故か鼓動がどんどん早くなってしまう"),
                w.diana.talk().t("おーい！",
                        "さっさと外に出るぞ。",
                        "今はできるだけ開門したくないんだってさ"),
                w.hero.look().d("既に$dianaは西門の前で門番と並んでいる"),
                w.hero.look().d("二階建て相当の大きな防壁に付けられた小さな門扉は",
                        "何とか馬車一頭立てのものが通れるほどの広さしかなかった"),
                w.kult.ask().t("$heroどうかしましたか？"),
                w.hero.look().d("それでも幼い頃に$dadと町の外に出て以来の",
                        "外出になる。",
                        "そう考えると$myにはそれがとても大きな魔物の口のようにも感じられて",
                        "踏み出した足が震えた"),
                w.diana.talk().t("そんな緊張するこったないさ。",
                        "どうせ出てくる魔物なんざ",
                        "小さな玉みたいなスライムか化け鴉や鼠程度だよ"),
                w.hero.talk().t("わ、分かってますよ"),
                w.hero.look().d("そう虚勢を張ったが$dianaにはお見通しなのか",
                        "思い切り背中を叩かれてそのまま腕を絡められ",
                        "一緒に開門された出入り口を潜り抜けた"),
                w.hero.look(w.stage.tower1),
                w.hero.know(w.diana, w.stage.tower1),
                w.hero.go(w.stage.tower1, "$must"),
                w.hero.go(w.stage.field1, w.day.first),
                w.hero.go("walk", w.stage.tower1),
                ),
            w.scene("最強の魔物",
                w.hero.be(w.stage.field1).d("風が吹き抜けていく"),
                w.hero.look().d("背後は防壁が聳えていたが",
                    "眼前にはどこまでも草木が靡く大地が広がっていた"),
                w.hero.feel().d("空は大半を雲に覆われ",
                    "遠くに見える山の稜線をぼんやりと隠してしまっていたが",
                    "それでも自分が今",
                    "旅の始まりにいるのだと実感するには充分な景色を見せてくれていた"),
                w.diana.talk().t("さあ",
                    "魔王退治の旅への第一歩を踏み出しますか"),
                w.hero.look().d("$dianaに言われ",
                    "$myは緊張気味に右足を上げる"),
                w.hero.feel().d("その時だった"),
                w.hero.think().t("え？"),
                w.hero.look().d("自分の背中を今押してくれたばかりの$dianaの顔と",
                    "前に進もうとしたはずの自分の目が", "合った"),
                w.maririn.talk().t("いやぁぁぁ！！！"),
                w.hero.hear().d("$maririnの悲鳴だ"),
                w.hero.look().d("それに慌てて振り返る"),
                w.hero.look().d("自分に向かって手を伸ばす$dianaの胴体だけが",
                    "確認できた"),
                w.hero.think().t("何……だ", "これ"),
                w.hero.look().d("頭部のない首から",
                    "血が吹き上がる"),
                w.kult.talk().t("危ない！"),
                w.hero.look().d("$kultは棒立ちの$my目掛けて走ってくると",
                    "そのまま両手で突き飛ばす"),
                w.hero.look().d("その彼の顔が寂しげに笑いながら「お嬢様を」と口を動かしたのだけは分かった"),
                w.maririn.talk("cry", "kult dead").t("いやぁ！",
                    "$kultが！", "$meの$kultが！！"),
                w.hero.look().d("今度は$myを突き飛ばした彼の胴体から下だけが",
                    "明後日の方角へと飛んでいく"),
                w.hero.think().d("理解が追いつかなかった。",
                    "一体何が起こっているのか。",
                    "それとも夢でも見ているのだろうか"),
                w.maririn.talk().t("$hero",
                    "逃げるよ"),
                w.hero.look().d("だがそんな彼の前に杖を手に$maririnが背を向けて立つ。",
                    "彼女が一瞬だけ見せた瞳には大粒の涙が光っていたが",
                    "その悲しみに気づき",
                    "$myはやっと自分の視界を定めることができた"),
                w.hero.look().d("彼女の肩越しにおぼろげながらその凶事の正体を確認する"),
                w.hero.meet(w.daemon1).d("全身を紫色の毛で覆われた巨大な熊にも見えた"),
                w.hero.look(w.daemon1).d("その手には巨木のような斧を持ち",
                    "青い炎の目をぎらつかせては",
                    "口から黒紫の瘴気を吐き出す。",
                    "額からは黄金の角が伸びており",
                    "背中に生えた翼は広げれば何軒分にもなるだろうと思えた"),
                w.daemon1.explain("巨大", "鬼の角", "大きな鎌"),
                w.daemon1.do("kill", w.kult),
                w.diana.do(w.i.battle, w.daemon1),
                w.daemon1.do("kill", w.diana),
                w.maririn.talk().t(f"{w.daemon1.name}……",
                        "魔王の配下の中でも最強と噂される魔物よ"),
                w.hero.ask().t("何で……どうしてそんな魔物がここに？！"),
                w.maririn.reply().t("分からないわよそんなの！",
                        "そもそも$meだって実物見たことないもの！"),
                w.hero.look().d("魔物は鈍く黒色に光る爪で$kultだったものを払いのけると",
                        "再び斧を振り上げて大きな一歩を踏み出す"),
                w.maririn.talk().t("とにかく逃げるしかないから"),
                w.hero.ask().t("でも$dianaさんや$kultさんが"),
                w.maririn.reply().t("もう二人は死んだの！",
                        "どうしようもないのよ！"),
                w.hero.look().d("$maririnは泣きながら杖を構え",
                        "何やら詠唱している"),
                w.hero.do().d("$myはどうすることもできず",
                        "それでも何かしないといけないと",
                        "酒場の店主から貰った飲み代の形に置いていったという重い剣を",
                        "鞘から引き抜いた"),
                w.maririn.talk().t("何してんの！",
                        "あんたが敵う相手じゃない"),
                w.hero.reply().t("でも……$meは勇者だから"),
                w.hero.do().d("彼女の手が",
                        "$myの右頬を叩いていた"),
                w.maririn.talk().t("いいからさっさと逃げなさい！",
                        "ここはお姉さんに任せて"),
                w.hero.reply().t("で、でも……"),
                w.maririn.talk().t("$meだって一度くらい殿方とキスしたかったわよ。",
                        "ほんと何でこんなことに……"),
                w.hero.look().d("そう呟きながら彼女は目の前の脅威に向かっていく"),
                w.maririn.talk().t("$meの今出来る最大のことはこれだけよ！",
                        "自爆魔法！"),
                w.hero.talk().t("$maririn！"),
                w.hero.look().d("強烈な光だった"),
                w.hero.move().d("続いて起こった爆風に$myの体は一瞬で遥か後方へと弾き飛ばされる"),
                w.hero.feel().d("それからどれくらいの時間が過ぎただろう"),
                w.hero.be().d("痛みに耐えながら目を開けると",
                        "土煙がゆっくりと晴れ",
                        "そこに一つの影が立っているのが確認できた"),
                w.hero.talk().t("$maririn？"),
                w.hero.look().d("けれどどう考えてみてもそれは",
                        "小柄な女性一人の大きさではなかった"),
                w.daemon1.talk().t("悪かったな。",
                        "お望みの者じゃなくて"),
                w.hero.hear().d("低く地の底から響くような声だ"),
                w.hero.look().d("魔物は紫の舌を伸ばして笑うと",
                        "大地を蹴って飛び上がる"),
                w.daemon1.talk().t("これでお前はゲームオーバーだ！"),
                w.hero.be(w.daemon1, w.i.deadly),
                w.hero.be(w.i.massacre),
                w.hero.think("無理だ").d("避ける。",
                        "逃げる。",
                        "そういった思考が生まれる余地はなかった"),
                w.hero.think().d("ごめん。$mother"),
                w.hero.think().d("そう心の中で祈ると",
                        "$myは静かに目を閉じた"),
                ),
            )
    return [w.chaptertitle("最強の魔物"),
            *scenes,
            ]


def ep_anotherhero(w: wd.World):
    scenes = (
            w.scene("もう一人の英雄",
                w.hero.think("恐怖", w.daemon1),
                w.daemon1.ask(w.hero, w.i.herosun),
                w.daemon1.talk(w.hero, "kill"),
                w.daemon1.talk(w.hero, "お前は死ぬようにこの世界はできている", w.flag.crackworld),
                w.hero.do("生き延びる"),
                w.hero.be(w.i.massacre),
                w.hero.go("runaway"),
                w.hero.be(w.stage.field1, w.day.first),
                w.hero.think("死を覚悟"),
                w.hero.do(w.hero99, "rescue"),
                w.hero.look(w.daemon1, "死体"),
                w.hero.look(w.hero99),
                w.hero.look("大量の魔物"),
                w.hero99.talk(w.hero, "一旦逃げるぞ"),
                ),
            w.scene("世界改変",
                w.hero.come(w.stage.field1.insided("洞窟")),
                w.hero.ask(w.hero99),
                w.hero99.reply(w.hero, "レベル９９"),
                w.hero.ask(w.i.level),
                w.hero99.talk(w.i.worldsecret),
                w.hero99.talk(w.deflag.crackworld),
                w.hero.know(w.hero99, w.i.worldsecret),
                w.hero.have(w.hero99, w.i.coop),
                w.hero99.be("vanish"),
                ),
            w.scene("レベル１",
                w.hero.talk(w.hero99),
                w.hero99.talk(w.hero, "本来は存在できない"),
                w.hero99.talk(w.hero, w.i.bug),
                w.hero.ask(w.hero99),
                w.hero99.talk(w.hero, "レベル１から上がらない"),
                ),
            )
    return [w.chaptertitle("もう一人の勇者"),
            *scenes,
            ]


# main
def world():
    w = wd.World("lv1 yusha project")
    w.set_db(cnf.CHARAS,
            cnf.STAGES,
            cnf.DAYS,
            cnf.ITEMS,
            cnf.INFOS,
            cnf.FLAGS,
            )
    return w


def story(w: wd.World):
    return (w.maintitle("レベル１勇者の旅立ち"),
            ep_intro(w),
            ep_heros_sun(w),
            ep_allies(w),
            ep_destruction(w),
            ep_anotherhero(w),
            )


def main(): # pragma: no cover
    w = world()
    return w.build(story(w))


if __name__ == '__main__':
    import sys
    sys.exit(main())

