# -*- coding: utf-8 -*-
"""Chapter 06: the red-chain
"""
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')

from storybuilder.builder import world as wd
from src.redchain import config as cnf
THM = cnf.THEMES


# scenes
def sc_deathanniv(w: wd.World):
    ma, mam, dad = w.masuda, w.mam, w.dad
    return w.scene("祖母の三回忌にて",
            ma.come("墓地").d("六月の始めの土曜日に",
                "祖母の三回忌と祖父の七回忌を一緒にした法事が行われた"),
            ma.think().d("最近腰が痛いという父親と",
                "黒服の前ボタンが閉まらないからとそのままにしている母親の面倒を見ながら",
                "そろそろ胡座に変えようかなと思いつつ", "住職のお経に手を合わせていた"),
            ma.feel().d("綺麗に磨かれた床板は寺を継ぐ為に帰ってきたという次男が拭いたものだろうか"),
            ma.look().d("こんな時くらいしか顔を合わさない近場の親戚連中の",
                "足が痛くなったと騒ぎ出して立ち上がる叔父さんに",
                "それを無理やり座らせようと取っ組み合いを始める叔母さんと",
                "やたらと手を叩いて笑い出す昼間から酔っ払っている浜の伯父",
                "という代わり映えのしない絵面に",
                "妙な安心感を抱いてしまう"),
            ma.go(w.stage.home, w.day.anniversary),
            ma.come().d("一時間も掛からずに拝み終えると",
                "のろのろと隣接する墓地に移動していく"),
            ma.look().d("心臓が悪い内蔵の数値が悪い糖尿病だ", "いや悪いのは頭の方だ何だと騒いでいる親戚筋は",
                "何だかんだ元気なようで先へ先へと祖父母の墓に向けて歩いていく。",
                "その後ろで右手を腰に当てながら確かに歩き辛そうにしている父の背を見ながら",
                "いつの間にか隣に並んでいた母と共にゆっくりと進んでいた"),
            mam.talk("結婚は？").t("でさ",
                "あんた良い話ないの？"),
            ma.ask().t("急に何？",
                "良い話ってＬＩＮＥにも書いただろ。",
                "何もない。", "無風な生活のままだよ"),
            ma.think().d("母親が何を言いたいのかはよく理解していた"),
            mam.talk().t("何もないってね",
                "何もしてないからでしょ？",
                "火のないところに何とかですよ。",
                "ねえお父さん"),
            dad.talk("農家継げばいい").t("今年は稲の収穫", "手伝ってくれるんか？"),
            ma.think().d("また始まった。",
                "こういう鬱陶しさが", "どんどん足取りを重くさせる"),
            ma.ask(w.hideko).t("今はそれどころじゃないんだよ。",
                "$n_hidekoのことを調べててて"),
            dad.reply().t("そんな昔の女優調べてどうするんだ？"),
            ma.ask().t("知ってるの？"),
            ma.look().d("父親は立ち止まって振り返ると",
                "$Hを見て首を捻る"),
            dad.ask().t("誰でも知ってる女優さんだぞ？"),
            ma.ask().t("え？", "母さんも？"),
            ma.look().d("うんうんと頷いてから",
                "でもあたしは$n_hidekoよりも共演した$n_actorの方が好きでとか話し出す"),
            ma.ask().t("そうじゃなくて$n_hidekoのこと", "そんなに有名だったの！？"),
            ma.look().d("二人とも揃って首を縦に振る。",
                "それからまるで彼女を知らなかった$Hが一人だけ別世界の人間かのように奇異な視線を向け",
                "もう一度同じ問いかけをした"),
            dad.ask().t("この町で$n_hidekoって言ったら$meら世代は誰もが知ってるぞ。",
                "お前は本当に知らないのか？",
                "あの$i_movienameの$n_hidekoのこと"),
            ma.reply().t("調べたから知ってるけど",
                    "あれってそんな有名な映画だったの？"),
            ma.look().d("そう尋ねた息子の顔をまじまじと見て溜息をつくと",
                    "父はこう返した"),
            dad.talk("秀子の話").t("$i_movienameはな", "ここがロケ地なんだよ"),
            ma.hear(w.movie, "舞台はこの町").d("え。",
                    "という形で口が固まってしまった$Hに",
                    "両親は顔を見合わせてから再び大きな溜息をついた"),
            )

def sc_lookthesite(w: wd.World):
    ma, takamori = w.masuda, w.takamori
    return w.scene("現場を訪れて",
            ma.come(w.stage.thesite).d("法事を途中で抜け出すと",
                "黒服のまま車に乗って火災現場に向かった"),
            ma.look().d("ちょうど昼を過ぎた頃だったからか",
                "土曜の中央通りはそれなりに混雑していて",
                "救急車がサイレンを鳴らして脇を追い抜いていく"),
            ma.feel().d("エアコンは効いている",
                "とは言い難かったが", "それでも無いよりは随分とマシだ"),
            ma.think().d("ハンドルに手を置いて目の前の信号が青に変わるのを待つ。",
                "その間も思考はずっと$n_hidekoとその初主演映画$i_movienameのことにだけ向かっていた"),
            ma.think().d("何故$n_hidekoは女優を辞めたのか"),
            ma.think().d("何故$n_hidekoはこの町を訪れたのか"),
            ma.think().d("そして何故$n_hidekoはこの町で亡くなったのか"),
            ma.look().d("ＬＥＤの赤が綺麗に円形に並ぶ信号が一瞬消える"),
            ma.deal().d("アクセルに足を置いた"),
            ma.feel().d("その何気ない動作と共に",
                "急に晴れ間が覗いたかのようなクリアな思考が訪れる"),
            ma.think().d("――そうなのかも知れない"),
            ma.go().d("$Hは湧き上がったある思考を胸に抱いたまま",
                "火災現場だった住宅街へと急いだ"),
            ma.look(w.stage.thesite).d("古い住宅が並ぶ通りの一画には",
                "まだ立入禁止の黄色いテープが貼られたままだった"),
            ma.look().d("ただ以前のように警官が立っている訳でもなく",
                "時折抜ける風がだらりと下がったテープを揺らしている"),
            ma.look().d("$Hはそのテープの前に立ち", "辛うじて柱が残っている燃えてしまった空き家の跡を眺めやった"),
            takamori.ask().t("おーい", "そこの不審者"),
            ma.look().d("呼びかけられて振り向くと",
                "自転車に乗った警邏中の$ln_takamoriだった。",
                "スカイブルーの半袖シャツは一応夏服なのだろうが",
                "それでもボタンでぴっちり留められていて蒸し暑そうだ"),
            ma.reply().t("不審者面はお前の方だろう？",
                "無精髭くらい剃った方が市井の人間の評判もちょっとはマシになるだろうに"),
            takamori.ask().t("色々こき使われて髭どころじゃないんだよ"),
            ma.look().d("高校からの腐れ縁の警官は自転車のスタンドを立てると",
                "隣にやってきて音をさせて肩を叩く"),
            takamori.talk().t("$masuあのな", "そんな黒服で火災跡を眺めてる奴の言葉に説得力があると思うか？"),
            ma.reply().t("これは法事だっただけだよ"),
            ma.think().d("確かにこんな格好で来てしまったことを",
                "今少しだけ後悔していた。",
                "汚れたらクリーニングで何とかなるだろうか"),
            ma.ask().t("ところでここ",
                "中に入ってもいいか？"),
            ma.look().d("そう尋ねた$Hに$ln_takamoriは怪訝な顔を向ける"),
            takamori.talk().t("確かにただのストーブ火災で事件性はないって話だったけど",
                "まだこうして立入規制してるんだから駄目に決まってるだろ？"),
            ma.reply().t("ちょっとだけだよ。",
                "別に中を荒らしたりしないからさ"),
            takamori.ask().t("そもそも記事になるようなもんはもう何も残ってないぞ？",
                "ここから見ても分かるだろうけど"),
            ma.look().d("確かに焼け落ちた天井部分が炭の山となっているだけだ。",
                "ただ$n_hidekoたちが見つかったのはその一階部分ではなく小さな地下室の方だったと",
                "$ln_sugiokaからは教わっている"),
            ma.behav().d("笑みを浮かべてテープを握ると", "$Hはそれを潜った"),
            takamori.talk().t("そういうこと平気でしない奴だと思ってたんだけど……$masu",
                    "なんかあったのか？"),
            ma.talk().t("ちょっと覗いてみたくなっただけだよ"),
            takamori.talk().t("まあ", "そういう日もあるか。",
                    "とにかく現場荒らすなよ。", "じゃ"),
            ma.look().d("苦笑して彼は行ってしまう"),
            ma.think().d("見逃してくれた友達の為にも約束を守らないといけないな",
                    "と思ったところで",
                    "玄関先に落ちていた何かを踏み壊してしまった"),
            ma.look().d("足を上げてみると",
                    "それは小さなレゴブロックの欠片だった"),
            ma.move().d("ひしゃげてしまったそれを拾い上げてハンカチに包んでポケットに入れると",
                    "先に進む"),
            ma.look().d("屋根に貼られていたトタンは曲がったり割れたりして足元に散らばっていた。",
                    "それを少し持ち上げると下に焼け焦げた木材が幾つも見つかる。",
                    "おまけにただ焦げ臭いのではなく別の魚や肉を焼いた時のそれを混ぜたような臭気が立ち上って",
                    "あまり長居はしたくないな", "と感じた"),
            ma.look().d("少し進んだところに",
                    "地下への入り口から梯子の一部が引っかかっているのが分かったが",
                    "その先は焼け落ちて床に転がっていた"),
            ma.think().d("一瞬思案したが",
                    "思い切って入り口に手を掛けてぶら下がる。",
                    "床まで足は届かないが", "それでもニ、三十センチほどだ。",
                    "思い切って降りた"),
            ma.talk().t("ここで$n_hidekoが……"),
            ma.think().d("思わず声が漏れる"),
            ma.look().d("広さにして八畳ほど", "天井も低く", "バスケ選手なら余裕で手を突くことができるだろう"),
            ma.look().d("そこに残骸として佇んでいる本棚と戸棚", "あとは学校の教室で見かけるような鉄パイプと木を組み合わせた机と椅子があった。",
                    "他にも色々と燃えかすになっている黒々した物が部屋の端に固まっていたけれど",
                    "火元だったと言われているストーブは見当たらない。",
                    "おそらく警察が押収したままになっているのだろう"),
            ma.think().d("ここで彼女ともう一人の女性が亡くなった"),
            ma.think().d("目を閉じてその様子を思い描くと",
                    "$Hは自然と手を合わせて祈っていた"),
            ma.think().d("$ln_doc医師の話を真に受けるなら",
                    "$n_hidekoではない方の",
                    "名前のない女性には臍の緒があった。",
                    "それは彼女との血縁を示すものかも知れないが",
                    "警察の方ではＤＮＡ鑑定などをする方向で捜査は進められていないようだと彼は言っていた"),
            ma.think().d("仮に$n_hidekoの娘だったとして",
                    "それなら彼女は自分の娘とこの町にやってきて",
                    "誰にも見つからないようにひっそりと生活していたのだろうか。",
                    "役者でない時の彼女は地味で目立たない存在だったと聞いているけれど",
                    "だからといって両親ですらよく知っているという映画に出たことがある人間を",
                    "誰も目に留めないということがあるだろうか"),
            ma.think().d("彼女の初主演作$i_movienameで主人公の$i_movieheroineは",
                    "望まない妊娠をして誰の手も借りずに一人で出産し",
                    "その娘を女手一つで立派に育て上げたという女性だった"),
            ma.think().d("$n_hidekoは本物の$i_movieheroineにでもなりたかったのだろうか"),
            ma.think().d("本人が亡くなってしまった今",
                    "それは誰にも分からない。",
                    "ひょっとすると彼女自身",
                    "そこに特別な理由なんてなかったのかも知れない。",
                    "ただ目の前に生まれた我が子を必死に育て",
                    "守ろうとしただけなのかも"),
            ma.behav().d("そんなことを思いついて小さな溜息をつくと",
                    "自分を覗き込んでいる顔に気づいた"),
            ma.ask().t("何してるんですか", "$neya"),
            ma.think(w.hideko, w.i.her_reason),
            )

def sc_meaning(w: wd.World):
    ma, miki = w.masuda, w.miki
    return w.scene("赤い繋がり",
            ma.deal().d("軽のワゴン車に何とか$n_mikiの自転車を積み込んで",
                "彼女のアパートまで向かっていた"),
            ma.ask().t("どうしてあんなところに来たんですか"),
            ma.think().d("助手席に座る彼女は長い丈のワンピースで足を組んでいて",
                "その所為か普段よりも色っぽいと感じられ",
                "$Hは思わず視線を逸して尋ねる"),
            miki.talk().t("一度$n_hidekoが亡くなった場所を見ておきたくなって。",
                "ちょうど会社も休みだったし"),
            ma.look().d("休日だから髪を解いているのだろうか。",
                "シートに掛かる髪の長さが肩まであると分かって",
                "ハンドルを握る手が汗をかいた"),
            ma.ask().t("でも結局どうして$n_hidekoがあそこで亡くなったのかについては",
                "何も分からないままでしたよ。",
                "女優を辞めてからの繋がりがぷっつり途絶えてしまっていて",
                "彼女は一体何がしたかったんでしょうね"),
            miki.talk().t("さっきの$masuの話を聞いた上で考えてみると",
                "子育てをしようとしたんじゃないかしら"),
            ma.ask().t("子育て？"),
            ma.think().d("意味が分からなくてついオウム返しに呟いてしまう"),
            miki.talk().t("子供を生む", "自分の血を受け継いだ別の人間が生まれるってさ",
                "やっぱり特別な感情だと思うんだよね"),
            ma.ask().t("$neyaて出産経験あるんですか？"),
            ma.look().d("ばーか。", "そう言って思い切り左の肩を叩かれた"),
            miki.talk().t("結婚も出産も何もかもこれからの予定だけどね、$meは。",
                "よく知らないけど彼女の場合はあまり良い家庭環境じゃなかったんでしょ？",
                "だからこそそこに憧れる気持ちとか",
                "自分だったら上手くやれるんじゃないだろうかって",
                "人生をやり直すみたいな感覚とか",
                "あってもおかしくないって思う訳"),
            ma.think().d("時折", "$ln_mikiは難しい話をする。",
                "$Hは彼女の世界の捉え方が好きだったが",
                "それに相槌や愛想笑いしか返せないことが", "少しだけ悔しかった"),
            miki.talk().t("どれくらいの期間をあの空き家で暮らしていたかは分からないけど",
                "考えてみて。",
                "自分の娘と二人きりで",
                "外にでは出ないように言いつけて自分は仕事なのか買い物なのか",
                "とにかく出掛けていく。",
                "帰ってきたら煙が上がっていて",
                "急いで地下に降りたらストーブが燃えてて",
                "自分の娘は倒れているの。",
                "１１９番をしてきたのが誰だか分からないままなんでしょ？",
                "それが彼女だったかも知れない"),
            ma.think().d("$n_mikiの大胆な推論に苦笑を返したが",
                "長時間焼かれていたという$ln_doc医師の証言からそれは否定できてしまう"),
            ma.think().d("ただ",
                "倒れていた娘を守ろうとして母親である$n_hidekoもそのまま息絶えてしまった可能性はある。",
                "当然それも名もなき女性が$n_hidekoの娘だったとして", "の話だけれども"),
            ma.deal().d("大通りから交差点を曲がり", "アパートが点在する路地に入る"),
            miki.ask().t("そういえば$masuて",
                "仕事いつまでやるつもり？"),
            ma.reply().t("あ、えっと……そうですね"),
            ma.think().d("前に話したことを覚えていてくれたのだろう"),
            ma.ask().t("$neyaの方こそどうなんですか？",
                    "もう今年で三十でしょ？"),
            ma.look().d("そう言った瞬間に睨まれた気がしたが、"),
            miki.ask().t("だから$masuにどうするの？", "って訊いてるのよ"),
            ma.look().d("彼女はそう言って髪を撫で付けながら", "遠くに視線を投げる"),
            ma.look().d("白い二階建てのアパートがニ棟並ぶのが目に入り",
                    "このささやかなドライブデートの時間も終わりが近くなるのが分かった"),
            miki.ask().t("ねえ$masu。",
                    "昼ご飯はもう食べた？"),
            ma.reply().t("いえ。", "まだですよ。",
                    "法事のお斎《とき》の弁当食べ損ねましたし"),
            miki.ask().t("じゃあさ", "簡単なものでよければ食べてく？"),
            ma.look().d("$ln_mikiはそう微笑すると$Hの顔を覗き込むように首を傾ける"),
            ma.think().d("その意味を必死に考えようとしたが",
                    "質問してみたところで正解なんて教えてくれないだろう。",
                    "それに自分が答える代わりにお腹が先に鳴っていた"),
            miki.talk().t("分かった。", "でもほんと", "簡単なものしか作れないからね"),
            ma.look().d("彼女は声を上げて笑いながら何度も「簡単なもの」と繰り返す"),
            ma.think().d("それは彼女なりの謙遜だったと後で知ることになるのだけれど",
                    "人間何が本当で何が間違いかなんて",
                    "そう簡単に分からない。",
                    "ただ$Hが思うのは",
                    "散り散りの情報を繋げてこちらが勝手に想像することでしか",
                    "何も理解できないということだ"),
            ma.think().d("いや", "理解した気になるだけで",
                    "決して全てをちゃんとなんて分かることは出来ない。",
                    "きっと$n_hidekoも", "名もなき彼女も",
                    "それに無縁仏になった$n_husbandだって",
                    "それぞれに何かしら考えて必死に生きて",
                    "そして亡くなったのだ"),
            ma.think().d("人間一人ができることなんて限られている"),
            ma.think().d("そう言えばよく小学生の頃に父が言っていたのだけれど、"),
            ma.hear().t("寝て置きて", "食べて働いて", "たまに酒飲んで",
                    "それを繰り返しているうちに死がやってくる。",
                    "人間てもんは何も特別なことなんかしてねえよ。",
                    "ただ生きてるだけだ"),
            ma.think().d("そんなことを酔っ払いの戯言として散々吹き込まれたことを",
                    "不意に思い出した"),
            ma.ask().t("あの$me", "玉子焼きの甘いのだけは駄目なんで"),
            miki.talk().t("何なのよ", "その突然の告白は"),
            ma.talk().t("いやほら",
                    "誰だって苦手なものの一つくらいあるでしょ。",
                    "そういえば$n_hidekoの苦手だった食べ物って何か知ってます？"),
            ma.deal().d("車を路地脇に停め",
                    "エンジンを切る"),
            miki.talk().t("そういう勿体ぶった質問", "あまり好きじゃないけど……梅干しとか"),
            ma.ask().t("$neya梅干し駄目なんですか？"),
            miki.talk().t("$meじゃなくて$n_hidekoでしょ？"),
            ma.talk().t("いや", "いきなり梅干し出てきたんで", "ひょっとしたらそうなのかなって"),
            ma.deal().d("彼女がドアを開けて下りたのを確認すると",
                    "窓を閉めてからキィを抜いて車外に出た"),
            miki.talk().t("それで結局何が苦手なの？"),
            ma.reply().t("$meも知りません"),
            ma.look().d("そう答えると彼女は一瞬顔を歪ませたが",
                    "次第に緩んでいって最後には手を叩いて笑った"),
            miki.talk().t("それじゃあ$masuには特別甘い玉子焼きを作ってあげるから",
                    "覚悟なさい"),
            ma.talk().t("それは勘弁して欲しいなあ。",
                    "ずっと父親好みの濃くて甘党な味付けにうんざりしてたもんで"),
            ma.deal().d("彼女の後について鉄製の外階段を上がる"),
            ma.look().d("$n_hidekoもこんな風に",
                    "笑いながら自分の娘と話したりしたのだろうか"),
            ma.think().d("$n_mikiが自分の玄関の鍵を開ける姿を見ながら",
                    "$Hはもう暫く今の仕事を続けることになるだろうと予感していた"),
            ma.think().d("できればこの町に辿り着いて亡くなったある女性の特集記事を一本",
                    "書き上げたいからだ"),
            ma.think().d("$ln_tanabeチーフは何も言わないだろう。",
                    "そういう意味では恵まれた職場だ"),
            ma.think().d("$n_hidekoという名前を通じて触れた様々な人の繋がりが",
                    "少しだけ$Hの中に奇妙な熱を産んでくれた。",
                    "今はそれを大事にしたい。",
                    "その気持ちはひょっとすると$ln_sugiokaが自分に一番求めていたものなのかも知れないと",
                    "$Hは彼に問いかけてみたくなった"),
            ma.think().d("ただそれは",
                    "もう少しまともな仕事ができてからということになるだろう"),
            miki.ask().t("どうしたの？", "まさか女性の部屋に入るのは初めてだとか", "言わないでしょうね"),
            ma.talk().t("いや良い天気だなと思って"),
            ma.look().d("彼女の笑顔が眩しかったのだけれど",
                    "思わず空を見上げてそう言ったことに少し機嫌を損ねたのか",
                    "ドアを勢い良く閉め、"),
            miki.talk().t("五分だけ待って！"),
            ma.hear().d("そう言って鍵を掛けられてしまった"),
            ma.feel().d("今年は暑い夏になりそうだ。",
                    "そんな思いで再び空を見上げると",
                    "細くたなびく飛行機雲の糸がずっとずっとどこまでも伸びていた"),
            ma.deal("お参り"),
            ma.think(w.hideko),
            miki.come(),
            miki.talk(w.hideko, "彼女について"),
            miki.ask("仕事続けるの？"),
            ma.reply("もう少しがんばってみます"),
            ma.think("仕事を続ける"),
            )

# episode
def ep_epilogue(w: wd.World):
    return [w.chaptertitle("エピローグ"),
            sc_deathanniv(w),
            sc_lookthesite(w),
            sc_meaning(w),
            ]

# main
def story(w: wd.World):
    return ep_epilogue(w)


def main(): # pragma: no cover
    from src.redchain.story import world
    w = world()
    return w.build(story(w))


if __name__ == '__main__':
    import sys
    sys.exit(main())

